(function(e){function t(t){for(var i,o,l=t[0],s=t[1],c=t[2],d=0,p=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);u&&u(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],i=!0,l=1;l<n.length;l++){var s=n[l];0!==a[s]&&(i=!1)}i&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},a={app:0},r=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/custom-form/demo/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var i=n("85ec"),a=n.n(i);a.a},"050a":function(e,t,n){},"17dc":function(e,t,n){"use strict";var i=n("2f35"),a=n.n(i);a.a},"21f5":function(e,t,n){"use strict";var i=n("9eff"),a=n.n(i);a.a},"2f35":function(e,t,n){},"31f7":function(e,t,n){"use strict";var i=n("8533"),a=n.n(i);a.a},"3e0d":function(e,t,n){},"3f9e":function(e,t,n){"use strict";var i=n("8bdd"),a=n.n(i);a.a},4601:function(e,t,n){},"4d78":function(e,t,n){"use strict";var i=n("89ae"),a=n.n(i);a.a},"56d7":function(e,t,n){"use strict";n.r(t);n("498a"),n("0fae");var i=n("9e2f"),a=n.n(i),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),o=n("8c4f"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{ref:"container",staticClass:"chart-wrapper"},[n("div",{staticClass:"state-item",staticStyle:{left:"0"},attrs:{id:"item-start"}},[e._v("State 1")]),n("div",{staticClass:"state-item",staticStyle:{left:"100px"},attrs:{id:"item-end"}},[e._v("State 2")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowMenu,expression:"isShowMenu"}],ref:"menu",staticClass:"context-menu"},[n("div",{on:{click:e.addNode}},[e._v("新增节点")])])])},s=[],c=(n("afb9"),n("e193")),u={Connector:["Flowchart"],Anchor:"AutoDefault",Endpoint:"Dot",EndpointStyle:{fill:"transparent"},EndpointHoverStyle:{radius:5,fill:"darkgray",outlineStroke:"darkgray",outlineWidth:1},Overlays:[["Arrow",{width:8,length:8,location:1}]],PaintStyle:{stroke:"#909399",strokeWidth:2},MaxConnections:-1},d={data:function(){return{nodeid:0,jsplumb:null,isShowMenu:!1}},mounted:function(){this.initJsPlumb(),this.initEvent()},methods:{initEvent:function(){var e=this;document.addEventListener("contextmenu",(function(t){t.preventDefault(),e.isShowMenu=!0,e.$nextTick((function(){e.$refs.menu.style.left=t.pageX+"px",e.$refs.menu.style.top=t.pageY+"px"}))}))},initJsPlumb:function(){var e=this;this.jsplumb=c["jsPlumb"].getInstance(u),c["jsPlumb"].importDefaults({ConnectionsDetachable:!1}),this.jsplumb.ready((function(){e.jsplumb.bind("click",(function(e,t){console.log(e,t)})),e.jsplumb.bind("contextmenu",(function(e,t){t.preventDefault(),console.log(e,t)})),e.jsplumb.draggable("item-end"),e.jsplumb.makeSource("item-start"),e.jsplumb.makeTarget("item-end"),e.jsplumb.connect({source:"item-start",target:"item-end",label:"FOO"})}))},addNode:function(e){var t="item-"+this.nodeid++,n=document.createElement("div");n.setAttribute("id",t),n.setAttribute("class","state-item"),n.style.left=e.pageX+"px",n.style.top=e.pageY+"px",n.innerText=t,this.$refs.container.appendChild(n);var i={isSource:!0,isTarget:!0};this.jsplumb.draggable(t),this.jsplumb.makeTarget(t),this.jsplumb.addEndpoint(t,{anchor:"Left"},i),this.jsplumb.addEndpoint(t,{anchor:"Right"},i),this.jsplumb.addEndpoint(t,{anchor:"Top"},i),this.jsplumb.addEndpoint(t,{anchor:"Bottom"},i)}}},p=d,m=(n("21f5"),n("2877")),f=Object(m["a"])(p,l,s,!1,null,"41b392c0",null),h=f.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{ref:"container",staticClass:"container"},[n("pre",{staticClass:"debug-bpmn"},[e._v("        "+e._s(e.xml)+"\n        ")])]),n("div",{ref:"properties",staticClass:"properties"},[n(e.propComponent,{key:e.elementId,tag:"component",attrs:{element:e.element}})],1),n("a",{ref:"download",staticClass:"download",attrs:{href:"javascript:;"}},[e._v("下载")])])},b=[],g=(n("c975"),n("96cf"),n("1da1")),y=n("7024"),w=(n("ac1f"),n("5319"),n("87f2"));function E(e,t,n,i,a,r,o,l){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=a,this._handTool=r,this._globalConnect=o,this._translate=l,e.registerProvider(this)}E.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],E.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,a=this._lassoTool,r=this._handTool,o=this._globalConnect,l=this._translate;function s(e,i,a,r,o){function s(i){var a=n.createShape(Object(w["assign"])({type:e},o));o&&(a.businessObject.di.isExpanded=o.isExpanded),t.start(i,a)}var c=e.replace(/^bpmn:/,"");return{group:i,className:a,title:r||l("Create {type}",{type:c}),action:{dragstart:s,click:s}}}return Object(w["assign"])(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:l("Activate the hand tool"),action:{click:function(e){r.activateHand(e)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:l("Activate the lasso tool"),action:{click:function(e){a.activateSelection(e)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:l("Activate the create/remove space tool"),action:{click:function(e){i.activateSelection(e)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:l("Activate the global connect tool"),action:{click:function(e){o.toggle(e)}}},"tool-separator":{group:"tools",separator:!0},"create.exclusive-gateway":s("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-xor",l("Create ExclusiveGateway")),"create.parallel-gateway":s("bpmn:ParallelGateway","gateway","bpmn-icon-gateway-parallel",l("Create ParallelGateway")),"create.inclusive-gateway":s("bpmn:InclusiveGateway","gateway","bpmn-icon-gateway-or",l("Create InclusiveGateway")),"gateway-separator":{group:"gateway",separator:!0},"create.start-event":s("bpmn:StartEvent","event","bpmn-icon-start-event-none",l("Create StartEvent")),"create.user-task":s("bpmn:UserTask","activity","bpmn-icon-user-task",l("Create UserTask")),"create.end-event":s("bpmn:EndEvent","event","bpmn-icon-end-event-none",l("Create EndEvent"))}),e};var x={__init__:["paletteProvider"],paletteProvider:["type",E]},C=n("cd2a"),_=n("224b"),T=n("c78f"),k=n("e645"),S=n("35be"),A=n("4507"),P=n("7a6b"),j=n("dbc8"),N=n("145d"),O=n("cf0a"),D=n("78f9");function F(e,t,n,i,a,r,o,l,s,c,u,d){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=a,this._elementFactory=r,this._connect=o,this._create=l,this._popupMenu=s,this._canvas=c,this._rules=u,this._translate=d,!1!==e.autoPlace&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,(function(e){var t=e.context,n=t.shape;if(Object(D["a"])(e)&&i.isOpen(n)){var a=i.getEntries(n);a.replace&&a.replace.action.click(e,n)}}))}function M(e,t,n){var i=e.$instanceOf(t),a=!1,r=e.eventDefinitions||[];return Object(w["forEach"])(r,(function(e){e.$type===n&&(a=!0)})),i&&a}F.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate"],F.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,a=this._connect,r=this._create,o=this._popupMenu,l=this._canvas,s=this._rules,c=this._autoPlace,u=this._translate,d={};if("label"===e.type)return d;var p=e.businessObject;function m(e,t){a.start(e,t)}function f(){n.removeElements([e])}function h(e){var n=5,i=l.getContainer(),a=t.getPad(e).html,r=i.getBoundingClientRect(),o=a.getBoundingClientRect(),s=o.top-r.top,c=o.left-r.left,u={x:c,y:s+o.height+n};return u}function v(e,t,n,a){function o(t,n){var o=i.createShape(Object(w["assign"])({type:e},a));r.start(t,o,{source:n})}"string"!==typeof n&&(a=n,n=u("Append {type}",{type:e.replace(/^bpmn:/,"")}));var l=c?function(t,n){var r=i.createShape(Object(w["assign"])({type:e},a));c.append(n,r)}:o;return{group:"model",className:t,title:n,action:{dragstart:o,click:l}}}function b(e){return function(i,a){n.splitLane(a,e),t.open(a,!0)}}if(Object(N["isAny"])(p,["bpmn:Lane","bpmn:Participant"])&&Object(j["isExpanded"])(p)){var g=Object(O["d"])(e);Object(w["assign"])(d,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:u("Add Lane above"),action:{click:function(e,t){n.addLane(t,"top")}}}}),g.length<2&&(e.height>=120&&Object(w["assign"])(d,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:u("Divide into two Lanes"),action:{click:b(2)}}}),e.height>=180&&Object(w["assign"])(d,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:u("Divide into three Lanes"),action:{click:b(3)}}})),Object(w["assign"])(d,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:u("Add Lane below"),action:{click:function(e,t){n.addLane(t,"bottom")}}}})}Object(P["is"])(p,"bpmn:FlowNode")&&(Object(P["is"])(p,"bpmn:EventBasedGateway")||Object(P["is"])(p,"bpmn:EndEvent")||p.isForCompensation||M(p,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")||Object(j["isEventSubProcess"])(p)||Object(w["assign"])(d,{"append.user-task":v("bpmn:UserTask","bpmn-icon-user-task",u("Append UserTask")),"append.parallel-gateway":v("bpmn:ParallelGateway","bpmn-icon-gateway-parallel",u("Append ParallelGateway")),"append.end-event":v("bpmn:EndEvent","bpmn-icon-end-event-none",u("Append EndEvent"))})),!o.isEmpty(e,"bpmn-replace")&&Object(P["is"])(p,"bpmn:Gateway")&&Object(w["assign"])(d,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:u("Change type"),action:{click:function(e,t){var n=Object(w["assign"])(h(t),{cursor:{x:e.x,y:e.y}});o.open(t,"bpmn-replace",n)}}}}),Object(N["isAny"])(p,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&!Object(P["is"])(p,"bpmn:EndEvent")&&Object(w["assign"])(d,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:u("Connect using "+(p.isForCompensation?"":"Sequence/MessageFlow or ")+"Association"),action:{click:m,dragstart:m}}});var y=s.allowed("elements.delete",{elements:[e]});return Object(w["isArray"])(y)&&(y=y[0]===e),y&&Object(w["assign"])(d,{delete:{group:"edit",className:"bpmn-icon-trash",title:u("Remove"),action:{click:f}}}),d};var B={__depends__:[C["a"],_["a"],T["a"],k["a"],S["a"],A["a"]],__init__:["contextPadProvider"],contextPadProvider:["type",F]},I={"Activate the global connect tool":"激活全局连接工具",Append:"追加","Append {type}":"添加 {type}","Append EndEvent":"追加 结束事件 ","Append Task":"追加 任务","Append Gateway":"追加 网关","Append Intermediate/Boundary Event":"追加 中间/边界 事件","Add Lane above":"在上面添加道","Divide into two Lanes":"分割成两个道","Divide into three Lanes":"分割成三个道","Add Lane below":"在下面添加道","Append compensation activity":"追加补偿活动","Change type":"修改类型","Connect using Association":"使用关联连接","Connect using Sequence/MessageFlow or Association":"使用顺序/消息流或者关联连接","Connect using DataInputAssociation":"使用数据输入关联连接",Remove:"移除","Activate the hand tool":"激活抓手工具","Activate the lasso tool":"激活套索工具","Activate the create/remove space tool":"激活创建/删除空间工具","Create expanded SubProcess":"创建扩展子过程","Create IntermediateThrowEvent/BoundaryEvent":"创建中间抛出事件/边界事件","Create Pool/Participant":"创建池/参与者","Parallel Multi Instance":"并行多重事件","Sequential Multi Instance":"时序多重事件",DataObjectReference:"数据对象参考",DataStoreReference:"数据存储参考",Loop:"循环","Ad-hoc":"即席","Create {type}":"创建 {type}","Create Group":"创建组",Task:"任务",Process:"流程",UserTask:"用户任务","Send Task":"发送任务","Receive Task":"接收任务","User Task":"用户任务","Manual Task":"手工任务","Business Rule Task":"业务规则任务","Service Task":"服务任务","Script Task":"脚本任务","Call Activity":"调用活动",CallActivity:"调用活动","Sub Process (collapsed)":"子流程（折叠的）","Sub Process (expanded)":"子流程（展开的）","Start Event":"开始事件",StartEvent:"开始事件","Intermediate Throw Event":"中间事件","End Event":"结束事件",EndEvent:"结束事件","Create Gateway":"创建网关",GateWay:"网关","Create Intermediate/Boundary Event":"创建中间/边界事件","Message Start Event":"消息开始事件","Timer Start Event":"定时开始事件","Conditional Start Event":"条件开始事件","Signal Start Event":"信号开始事件","Error Start Event":"错误开始事件","Escalation Start Event":"升级开始事件","Compensation Start Event":"补偿开始事件","Message Start Event (non-interrupting)":"消息开始事件（非中断）","Timer Start Event (non-interrupting)":"定时开始事件（非中断）","Conditional Start Event (non-interrupting)":"条件开始事件（非中断）","Signal Start Event (non-interrupting)":"信号开始事件（非中断）","Escalation Start Event (non-interrupting)":"升级开始事件（非中断）","Message Intermediate Catch Event":"消息中间捕获事件","Message Intermediate Throw Event":"消息中间抛出事件","Timer Intermediate Catch Event":"定时中间捕获事件","Escalation Intermediate Throw Event":"升级中间抛出事件","Conditional Intermediate Catch Event":"条件中间捕获事件","Link Intermediate Catch Event":"链接中间捕获事件","Link Intermediate Throw Event":"链接中间抛出事件","Compensation Intermediate Throw Event":"补偿中间抛出事件","Signal Intermediate Catch Event":"信号中间捕获事件","Signal Intermediate Throw Event":"信号中间抛出事件","Message End Event":"消息结束事件","Escalation End Event":"定时结束事件","Error End Event":"错误结束事件","Cancel End Event":"取消结束事件","Compensation End Event":"补偿结束事件","Signal End Event":"信号结束事件","Terminate End Event":"终止结束事件","Message Boundary Event":"消息边界事件","Message Boundary Event (non-interrupting)":"消息边界事件（非中断）","Timer Boundary Event":"定时边界事件","Timer Boundary Event (non-interrupting)":"定时边界事件（非中断）","Escalation Boundary Event":"升级边界事件","Escalation Boundary Event (non-interrupting)":"升级边界事件（非中断）","Conditional Boundary Event":"条件边界事件","Conditional Boundary Event (non-interrupting)":"条件边界事件（非中断）","Error Boundary Event":"错误边界事件","Cancel Boundary Event":"取消边界事件","Signal Boundary Event":"信号边界事件","Signal Boundary Event (non-interrupting)":"信号边界事件（非中断）","Compensation Boundary Event":"补偿边界事件","Exclusive Gateway":"互斥网关",ExclusiveGateway:"互斥网关","Parallel Gateway":"并行网关",ParallelGateway:"并行网关","Inclusive Gateway":"相容网关",InclusiveGateway:"相容网关","Complex Gateway":"复杂网关","Event based Gateway":"事件网关",Transaction:"转运","Sub Process":"子流程","Event Sub Process":"事件子流程","Collapsed Pool":"折叠池","Expanded Pool":"展开池","no parent for {element} in {parent}":"在{parent}里，{element}没有父类","no shape type specified":"没有指定的形状类型","flow elements must be children of pools/participants":"流元素必须是池/参与者的子类","out of bounds release":"out of bounds release","more than {count} child lanes":"子道大于{count} ","element required":"元素不能为空","diagram not part of bpmn:Definitions":"流程图不符合bpmn规范","no diagram to display":"没有可展示的流程图","no process or collaboration to display":"没有可展示的流程/协作","element {element} referenced by {referenced}#{property} not yet drawn":"由{referenced}#{property}引用的{element}元素仍未绘制","already rendered {element}":"{element} 已被渲染","failed to import {element}":"导入{element}失败",Id:"编号",Name:"名称",General:"常规",Details:"详情","Message Name":"消息名称",Message:"消息",Initiator:"创建者","Asynchronous Continuations":"持续异步","Asynchronous Before":"异步前","Asynchronous After":"异步后","Job Configuration":"工作配置",Exclusive:"排除","Job Priority":"工作优先级","Retry Time Cycle":"重试时间周期",Documentation:"文档","Element Documentation":"元素文档","History Configuration":"历史配置","History Time To Live":"历史的生存时间","Start Time":"开始时间",continuedTime:"持续时间","create class":"任务创建监听类","Listener Id":"监听器编号",create_delegateExpression:"任务创建监听委托表达式",assignmentClass:"分配监听类",assignmentDelegateExpression:"分配监听委托表达式",completeClassEntry:"完成监听类",completeDelegateExpression:"完成监听委托表达式",deleteClass:"删除监听类",deleteDelegateExpression:"删除监听委托表达式","Execution Class":"执行类",expression:"表达式","delegate Expression":"委托表达式",approvalBtn:"审批意见类型","assignee List":"执行人","node Type":"节点类型",transConditions:"自动转手动转换条件",loopTime:"循环时间","start Configuration":"启动配置","end Configuration":"结束配置","service Task":"服务任务配置",Forms:"表单","Form Key":"表单key","Form Fields":"表单字段","Business Key":"业务key","Form Field":"表单字段",ID:"编号",Type:"类型",Label:"名称","Default Value":"默认值",Validation:"校验","Add Constraint":"添加约束",Config:"配置",Properties:"属性","Add Property":"添加属性",Value:"值",Add:"添加",Values:"值","Add Value":"添加值",Listeners:"监听器","Execution Listener":"执行监听","Event Type":"事件类型","Listener Type":"监听器类型","Java Class":"Java类",Expression:"表达式","Must provide a value":"必须提供一个值","Delegate Expression":"代理表达式",Script:"脚本","Script Format":"脚本格式","Script Type":"脚本类型","Inline Script":"内联脚本","External Script":"外部脚本","External Resource":"外部资源",Resource:"资源","Field Injection":"字段注入",Extensions:"扩展","Input/Output":"输入/输出","event Configure":"事件配置","Input Parameters":"输入参数","Output Parameters":"输出参数",Parameters:"参数","Output Parameter":"输出参数","Timer Definition Type":"定时器定义类型","Timer Definition":"定时器定义",Date:"日期",Duration:"持续",Cycle:"循环",Signal:"信号","Signal Name":"信号名称",Escalation:"升级",Error:"错误","Link Name":"链接名称",Condition:"条件名称","Variable Name":"变量名称","Variable Event":"变量事件","Specify more than one variable change event as a comma separated list.":"多个变量事件以逗号隔开","Wait for Completion":"等待完成","Activity Ref":"活动参考","Version Tag":"版本标签","end configure":"结束配置",Executable:"可执行文件","External Task Configuration":"扩展任务配置","Task Priority":"任务优先级",External:"外部",Connector:"连接器","Must configure Connector":"必须配置连接器","Connector Id":"连接器编号",Implementation:"实现方式","Field Injections":"字段注入",Fields:"字段","Result Variable":"结果变量",Topic:"主题","Configure Connector":"配置连接器","Input Parameter":"输入参数",Assignee:"代理人","Candidate Users":"候选用户","Candidate Groups":"候选组(即岗位)","Due Date":"到期时间","Follow Up Date":"跟踪日期",Priority:"优先级","The follow up date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00","The due date as an EL expression (e.g. ${someDate} or an ISO date (e.g. 2015-06-26T09:54:00)":"跟踪日期必须符合EL表达式，如： ${someDate} ,或者一个ISO标准日期，如：2015-06-26T09:54:00",Variables:"变量","Candidate Starter Configuration":"候选开始配置","Task Listener":"任务监听器","Candidate Starter Groups":"候选开始组","Candidate Starter Users":"候选开始用户","Tasklist Configuration":"任务列表配置",Startable:"启动","Specify more than one group as a comma separated list.":"指定多个组,用逗号分隔","Specify more than one user as a comma separated list.":"指定多个用户,用逗号分隔","Specify more than one user as a comma separated list..":"指定多个执行人,用逗号分隔(手动类型)","This maps to the process definition key.":"这会映射为流程定义的键","CallActivity Type":"调用活动类型","Create CallActivity":"创建调用活动","Called Element":"调用元素","Create DataObjectReference":"创建数据对象引用","Create DataStoreReference":"创建数据存储引用","Multi Instance":"多实例","Loop Cardinality":"实例数量",Collection:"任务参与人列表","Element Variable":"元素变量","Completion Condition":"完成条件","Append CallActivity":"追加 调用活动",Binding:"绑定","Tenant Id":"租户ID","This maps to the task definition key.":"这会映射为任务定义的key","Form field id must not be empty":"表单字段不能为空","Form field id already used in form data.":"表单中已经存在该字段","Must provide either loop cardinality or collection":"必须提供实例数量或者任务参与人列表","Select UserTask":"选择一个已经配置的用户任务","Element must have an unique id.":"元素必须要有一个唯一的id",create:"创建",assignment:"代理",complete:"完成",delete:"删除",update:"更新",timeout:"超时",start:"开始",end:"结束",save:"保存",Tools:"工具",FlowGateway:"流程网关",ProcessControl:"流程节点","Create StartEvent":"开始节点","Create EndEvent":"结束节点","Create ExclusiveGateway":"互斥网关","Create ParallelGateway":"并行网关","Create InclusiveGateway":"包容性网关","Create Task":"任务节点","Create UserTask":"用户任务节点","Create ServiceTask":"服务任务节点","Condition Type":"条件类型","Sequence flow is missing condition":"流程线缺少流程条件"," is missing end event":"缺少结束节点","Start event is missing event definition":"开始事件缺少事件定义","Incoming flows do not join":"传入流没合并","Element is missing label/name":"元素缺少标签/名称","Element has disallowed type":"元素具有不允许的类型","Element is not connected":"元素未连接","Element is not left connected":"元素没有左连接","Element is not right connected":"元素没有右连接","SequenceFlow is a duplicate":"SequenceFlow是重复的","Duplicate outgoing sequence flows":"重复的传出序列流","Duplicate incoming sequence flows":"重复的传入序列流","Gateway forks and joins":"同时分叉和合并的网关","Flow splits implicitly":"流隐式拆分"," has multiple blank start events":"有多个空开始事件","Event has multiple event definitions":"事件具有多个事件定义"," is missing start event":"缺少开始事件","Start event must be blank":"开始事件必须为空","Gateway is superfluous. It only has one source and target.":"网关是多余的。它只有一个源和目标","":""};function R(e,t){return t=t||{},e=I[e]||e,e.replace(/{([^}]+)}/g,(function(e,n){return t[n]||"{".concat(n,"}")}))}var $,q,L={__init__:["translate"],translate:["value",R]},G=n("eb2a"),V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("el-form-item",{attrs:{label:"编号"}},[e._v(" "+e._s(e.form.id)+" ")]),n("el-form-item",{attrs:{label:"流程名称",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)},H=[],z={inject:["getModeler"],props:{element:{type:Object,default:function(){return null}}},data:function(){return{modeler:null,moddle:null,bpmnFactory:null}},created:function(){this.modeler=this.getModeler(),this.moddle=Object(P["getBusinessObject"])(this.element),this.bpmnFactory=this.modeler.get("bpmnFactory")},methods:{updateProperties:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.element,n=this.modeler.get("modeling");n.updateProperties(t,e),console.log(n)}}},U=z,J=Object(m["a"])(U,$,q,!1,null,null,null),X=J.exports,W={mixins:[X],data:function(){return{form:{id:null,name:null}}},watch:{"form.name":function(e){this.updateProperties({name:e})}},created:function(){this.init()},methods:{init:function(){for(var e=["id","name"],t=0,n=e;t<n.length;t++){var i=n[t];this.form[i]=this.moddle[i]}}}},Y=W,K=Object(m["a"])(Y,V,H,!1,null,"8dc2bc6a",null),Q=K.exports,Z='<?xml version="1.0" encoding="UTF-8"?>\r\n<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:custom="http://custom/ns" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn">\r\n  <bpmn:process id="Process_1" isExecutable="false">\r\n    <bpmn:startEvent id="StartEvent_1">\r\n    </bpmn:startEvent>\r\n  </bpmn:process>\r\n  <bpmndi:BPMNDiagram id="BPMNDiagram_1">\r\n    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">\r\n      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">\r\n        <dc:Bounds x="173" y="188" width="36" height="36" />\r\n        <bpmndi:BPMNLabel>\r\n          <dc:Bounds x="146" y="224" width="90" height="20" />\r\n        </bpmndi:BPMNLabel>\r\n      </bpmndi:BPMNShape>\r\n    </bpmndi:BPMNPlane>\r\n  </bpmndi:BPMNDiagram>\r\n</bpmn:definitions>\r\n',ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},te=[],ne={},ie=ne,ae=Object(m["a"])(ie,ee,te,!1,null,"4583fdb4",null),re=ae.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},le=[],se={},ce=se,ue=Object(m["a"])(ce,oe,le,!1,null,"5ae80d46",null),de=ue.exports,pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},me=[],fe={},he=fe,ve=Object(m["a"])(he,pe,me,!1,null,"0de9e82d",null),be=ve.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},ye=[],we={},Ee=we,xe=Object(m["a"])(Ee,ge,ye,!1,null,"46f75c9f",null),Ce=xe.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},Te=[],ke={},Se=ke,Ae=Object(m["a"])(Se,_e,Te,!1,null,"41bbd994",null),Pe=Ae.exports,je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{model:{value:e.form,callback:function(t){e.form=t},expression:"form"}})},Ne=[],Oe={mixins:[X],data:function(){return{form:{}}},created:function(){}},De=Oe,Fe=Object(m["a"])(De,je,Ne,!1,null,"e54fc84a",null),Me=Fe.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},Ie=[],Re={},$e=Re,qe=Object(m["a"])($e,Be,Ie,!1,null,"46ceb640",null),Le=qe.exports,Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("el-form-item",{attrs:{label:"编号"}},[e._v(" "+e._s(e.form.id)+" ")]),e.hasCondition?n("el-form-item",{attrs:{label:"条件"}},[n("el-input",{model:{value:e.form.condition,callback:function(t){e.$set(e.form,"condition",t)},expression:"form.condition"}})],1):e._e()],1)},Ve=[],He=n("7a6b").getBusinessObject,ze=n("7a6b").is,Ue=n("6cd4"),Je={getEventDefinition:function(e,t){var n=He(e),i=null;return n.eventDefinitions&&Ue(n.eventDefinitions,(function(e){ze(e,t)&&(i=e)})),i},getTimerEventDefinition:function(e){return this.getEventDefinition(e,"bpmn:TimerEventDefinition")},getMessageEventDefinition:function(e){return this.getEventDefinition(e,"bpmn:MessageEventDefinition")},getSignalEventDefinition:function(e){return this.getEventDefinition(e,"bpmn:SignalEventDefinition")},getErrorEventDefinition:function(e){return this.getEventDefinition(e,"bpmn:ErrorEventDefinition")},getEscalationEventDefinition:function(e){return this.getEventDefinition(e,"bpmn:EscalationEventDefinition")},getCompensateEventDefinition:function(e){return this.getEventDefinition(e,"bpmn:CompensateEventDefinition")},getLinkEventDefinition:function(e){return this.getEventDefinition(e,"bpmn:LinkEventDefinition")},getConditionalEventDefinition:function(e){return this.getEventDefinition(e,"bpmn:ConditionalEventDefinition")}},Xe=Je,We={createElement:function(e,t,n,i){var a=i.create(e,t);return a.$parent=n,a}},Ye=We,Ke={mixins:[X],data:function(){return{hasCondition:!1,form:{id:null,condition:null}}},watch:{"form.condition":function(e){var t={body:e},n=Ye.createElement("bpmn:FormalExpression",t,this.moddle,this.bpmnFactory),i=this.element.source;i&&i.businessObject.default===this.moddle&&this.updateProperties({default:void 0},i),this.moddle.set("conditionExpression",n)}},created:function(){this.init()},methods:{init:function(){for(var e=["id"],t=0,n=e;t<n.length;t++){var i=n[t];this.form[i]=this.moddle[i]}(Object(P["is"])(this.element.source,"bpmn:ExclusiveGateway")||Object(P["is"])(this.element.source,"bpmn:InclusiveGateway"))&&(this.hasCondition=!0),this.initConditionProp()},initConditionProp:function(){var e=Xe.getConditionalEventDefinition(this.element),t=e?e.condition:this.moddle.conditionExpression;t&&(this.form.condition=t.get("body"))}}},Qe=Ke,Ze=Object(m["a"])(Qe,Ge,Ve,!1,null,"1ca981b2",null),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div")},nt=[],it={},at=it,rt=Object(m["a"])(at,tt,nt,!1,null,"f46c5502",null),ot=rt.exports,lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-form",{model:{value:e.form,callback:function(t){e.form=t},expression:"form"}},[n("el-form-item",{attrs:{label:"流程名称"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"候选人"}},[n("el-select",{model:{value:e.form.assignee,callback:function(t){e.$set(e.form,"assignee",t)},expression:"form.assignee"}},[n("el-option",{attrs:{value:"zhangsan"}},[e._v("zhangsan")]),n("el-option",{attrs:{value:"lisi"}},[e._v("lisi")])],1)],1)],1)},st=[],ct={mixins:[X],data:function(){return{form:{name:null,assignee:null}}}},ut=ct,dt=Object(m["a"])(ut,lt,st,!1,null,"a5c49d4c",null),pt=dt.exports,mt={CallActivityProps:re,CommonProps:Q,EndEventProps:de,ExclusiveGatewayProps:be,InclusiveGatewayProps:Ce,IntermediateThrowEventProps:Pe,ParallelGatewayProps:Me,ProcessProps:Le,SequenceFlowProps:et,StartEventProps:ot,UserTaskProps:pt},ft="bpmn:",ht="activiti:",vt={collaboration:ft+"Collaboration",textAnnotation:ft+"TextAnnotation",group:ft+"Group",process:ft+"Process",documentation:ft+"Documentation",startEvent:ft+"StartEvent",endEvent:ft+"EndEvent",throwEvent:ft+"IntermediateThrowEvent",exclusiveGateway:ft+"ExclusiveGateway",inclusiveGateway:ft+"InclusiveGateway",parallelGateway:ft+"ParallelGateway",sequenceFlow:ft+"SequenceFlow",userTask:ft+"UserTask",callActivity:ft+"CallActivity",listener:ht+"Listener",startEventReadonly:ft+"StartEventReadonly",endEventReadonly:ft+"EndEventReadonly",throwEventReadonly:ft+"IntermediateThrowEventReadonly",exclusiveGatewayReadonly:ft+"ExclusiveGatewayReadonly",inclusiveGatewayReadonly:ft+"InclusiveGatewayReadonly",parallelGatewayReadonly:ft+"ParallelGatewayReadonly",sequenceFlowReadonly:ft+"SequenceFlowReadonly",userTaskReadonly:ft+"UserTaskReadonly",callActivityReadonly:ft+"CallActivityReadonly"},bt=vt,gt={};gt[bt.process]="ProcessProps",gt[bt.startEvent]="StartEventProps",gt[bt.endEvent]="EndEventProps",gt[bt.throwEvent]="IntermediateThrowEventProps",gt[bt.exclusiveGateway]="ExclusiveGatewayProps",gt[bt.inclusiveGateway]="InclusiveGatewayProps",gt[bt.parallelGateway]="ParallelGatewayProps",gt[bt.sequenceFlow]="SequenceFlowProps",gt[bt.userTask]="UserTaskProps",gt[bt.callActivity]="CallActivityProps";var yt=gt,wt=function(e){return mt[yt[e]]};n("ae0a");var Et={provide:function(){return{getModeler:this.getModeler}},data:function(){return{modeler:null,propComponent:null,element:null,rootElement:null,xml:null}},computed:{elementId:function(){return this.element?this.element.id:null}},watch:{xml:function(e){window.localStorage.setItem("__FS_BPMN",e)}},mounted:function(){this.xml=window.localStorage.getItem("__FS_BPMN")||Z,this.initModeler()},methods:{getModeler:function(){return this.modeler},initModeler:function(){var e=this;this.modeler=new y["a"]({container:this.$refs.container,propertiesPanel:{parent:this.$refs.properties},additionalModules:[L,x,B],moddleExtensions:{magic:G},keyboard:{bindTo:document.body}}),this.modeler.importXML(this.xml,(function(t){t?console.error("加载流程定义失败！"):(e.rootElement=e.modeler.get("canvas")._rootElement,e.element=e.rootElement,e.propComponent=Q,e.addModelerlistener(),e.addEventBusListener())})),xt(this.modeler,this.$refs.download)},addModelerlistener:function(){},addEventBusListener:function(){for(var e=this,t=this.modeler.get("eventBus"),n=["elements.changed","selection.changed"],i=function(){var n=r[a];t.on(n,(function(t){"elements.changed"===n?(e.modeler.saveXML({format:!0}).then((function(t){var n=t.xml;e.xml=n})),e.elementChangedHandler(t)):"selection.changed"===n&&e.elementSelectionHandler(t)}))},a=0,r=n;a<r.length;a++)i()},elementChangedHandler:function(e){e.elements.indexOf(this.element)},elementSelectionHandler:function(e){var t=e.newSelection[0];t?(this.propComponent=wt(t.type),this.element=t):(this.propComponent=Q,this.element=this.rootElement)},elementClickedHandler:function(e){e&&"bpmn:Process"!==e.element.type?(this.propComponent=wt(e.element.type),this.element=e.element):(this.propComponent=Q,this.element=e.element)},setDefaultProperties:function(){}}};function xt(e,t){var n=Object(w["debounce"])(Object(g["a"])(regeneratorRuntime.mark((function n(){var i,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.saveXML({format:!0});case 3:i=n.sent,a=i.xml,Ct(t,"diagram.bpmn",a),n.next=12;break;case 8:n.prev=8,n.t0=n["catch"](0),console.log("Error happened saving XML: ",n.t0),Ct(t,"diagram.bpmn",null);case 12:case"end":return n.stop()}}),n,null,[[0,8]])}))),500);e.on("commandStack.changed",n)}function Ct(e,t,n){var i=encodeURIComponent(n);n?(e.classList.add("active"),e.setAttribute("href","data:application/bpmn20-xml;charset=UTF-8,"+i),e.setAttribute("download",t)):e.classList.remove("active")}var _t=Et,Tt=(n("9678"),Object(m["a"])(_t,v,b,!1,null,"1a02475c",null)),kt=Tt.exports,St=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{ref:"container",staticClass:"container"},[n("pre",{staticClass:"debug-bpmn"},[e._v("        "+e._s(e.xml)+"\n        ")])]),n("div",{ref:"properties",staticClass:"properties"}),n("a",{ref:"download",staticClass:"download",attrs:{href:"javascript:;"}},[e._v("下载")]),n("a",{ref:"export",staticClass:"export",attrs:{href:"javascript:;"}},[e._v("导出")])])},At=[],Pt=n("1cdc6"),jt=n.n(Pt),Nt=n("04be"),Ot=n.n(Nt),Dt=n("74a6"),Ft='<?xml version="1.0" encoding="UTF-8"?>\r\n<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:custom="http://custom/ns" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn">\r\n  <bpmn:process id="Process_1" isExecutable="false">\r\n    <bpmn:startEvent id="StartEvent_1">\r\n      <bpmn:outgoing>SequenceFlow_0b6cm13</bpmn:outgoing>\r\n    </bpmn:startEvent>\r\n    <bpmn:sequenceFlow id="SequenceFlow_0b6cm13" sourceRef="StartEvent_1" targetRef="Task_0zlv465" />\r\n    <bpmn:endEvent id="EndEvent_09arx8f">\r\n      <bpmn:incoming>SequenceFlow_035kn8o</bpmn:incoming>\r\n    </bpmn:endEvent>\r\n    <bpmn:sequenceFlow id="SequenceFlow_17w8608" sourceRef="Task_0zlv465" targetRef="Task_1xewseo" />\r\n    <bpmn:task id="Task_1xewseo" name="Do more work">\r\n      <bpmn:incoming>SequenceFlow_17w8608</bpmn:incoming>\r\n      <bpmn:outgoing>SequenceFlow_035kn8o</bpmn:outgoing>\r\n    </bpmn:task>\r\n    <bpmn:sequenceFlow id="SequenceFlow_035kn8o" sourceRef="Task_1xewseo" targetRef="EndEvent_09arx8f" />\r\n    <bpmn:serviceTask id="Task_0zlv465" name="Do work" custom:topic="my.custom.topic">\r\n      <bpmn:incoming>SequenceFlow_0b6cm13</bpmn:incoming>\r\n      <bpmn:outgoing>SequenceFlow_17w8608</bpmn:outgoing>\r\n    </bpmn:serviceTask>\r\n  </bpmn:process>\r\n  <bpmndi:BPMNDiagram id="BPMNDiagram_1">\r\n    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1">\r\n      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1">\r\n        <dc:Bounds x="173" y="188" width="36" height="36" />\r\n        <bpmndi:BPMNLabel>\r\n          <dc:Bounds x="146" y="224" width="90" height="20" />\r\n        </bpmndi:BPMNLabel>\r\n      </bpmndi:BPMNShape>\r\n      <bpmndi:BPMNEdge id="SequenceFlow_0b6cm13_di" bpmnElement="SequenceFlow_0b6cm13">\r\n        <di:waypoint x="209" y="206" />\r\n        <di:waypoint x="256" y="206" />\r\n        <bpmndi:BPMNLabel>\r\n          <dc:Bounds x="192.5" y="110" width="90" height="20" />\r\n        </bpmndi:BPMNLabel>\r\n      </bpmndi:BPMNEdge>\r\n      <bpmndi:BPMNShape id="EndEvent_09arx8f_di" bpmnElement="EndEvent_09arx8f">\r\n        <dc:Bounds x="552" y="188" width="36" height="36" />\r\n        <bpmndi:BPMNLabel>\r\n          <dc:Bounds x="404" y="138" width="90" height="20" />\r\n        </bpmndi:BPMNLabel>\r\n      </bpmndi:BPMNShape>\r\n      <bpmndi:BPMNEdge id="SequenceFlow_17w8608_di" bpmnElement="SequenceFlow_17w8608">\r\n        <di:waypoint x="356" y="206" />\r\n        <di:waypoint x="399" y="206" />\r\n        <bpmndi:BPMNLabel>\r\n          <dc:Bounds x="353.5" y="110" width="90" height="20" />\r\n        </bpmndi:BPMNLabel>\r\n      </bpmndi:BPMNEdge>\r\n      <bpmndi:BPMNShape id="Task_1xewseo_di" bpmnElement="Task_1xewseo">\r\n        <dc:Bounds x="399" y="166" width="100" height="80" />\r\n      </bpmndi:BPMNShape>\r\n      <bpmndi:BPMNEdge id="SequenceFlow_035kn8o_di" bpmnElement="SequenceFlow_035kn8o">\r\n        <di:waypoint x="499" y="206" />\r\n        <di:waypoint x="552" y="206" />\r\n      </bpmndi:BPMNEdge>\r\n      <bpmndi:BPMNShape id="ServiceTask_0wob562_di" bpmnElement="Task_0zlv465">\r\n        <dc:Bounds x="256" y="166" width="100" height="80" />\r\n      </bpmndi:BPMNShape>\r\n    </bpmndi:BPMNPlane>\r\n  </bpmndi:BPMNDiagram>\r\n</bpmn:definitions>\r\n',Mt={data:function(){return{modeler:null,xml:null}},mounted:function(){var e=this;function t(e,t,n){var i=encodeURIComponent(n);n?(e.classList.add("active"),e.setAttribute("href","data:application/bpmn20-xml;charset=UTF-8,"+i),e.setAttribute("download",t)):e.classList.remove("active")}this.modeler=new y["a"]({container:this.$refs.container,propertiesPanel:{parent:this.$refs.properties},additionalModules:[jt.a,Ot.a],moddleExtensions:{camunda:Dt},keyboard:{bindTo:document.body}}),this.modeler.importXML(Ft),this.modeler.get("eventBus").on("elements.changed",(function(){e.modeler.saveXML({format:!0}).then((function(t){var n=t.xml;e.xml=n}))}));var n=this.$refs.download,i=this.$refs.export,a=this.modeler,r=Object(w["debounce"])(Object(g["a"])(regeneratorRuntime.mark((function e(){var r,o,l,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.saveSVG();case 3:r=e.sent,o=r.svg,t(i,"diagram.svg",o),e.next=12;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("Error happened saving SVG: ",e.t0),t(i,"diagram.svg",null);case 12:return e.prev=12,e.next=15,a.saveXML({format:!0});case 15:l=e.sent,s=l.xml,t(n,"diagram.bpmn",s),e.next=24;break;case 20:e.prev=20,e.t1=e["catch"](12),console.log("Error happened saving XML: ",e.t1),t(n,"diagram.bpmn",null);case 24:case"end":return e.stop()}}),e,null,[[0,8],[12,20]])}))),500);a.on("commandStack.changed",r)}},Bt=Mt,It=(n("3f9e"),Object(m["a"])(Bt,St,At,!1,null,"24a60afd",null)),Rt=It.exports,$t=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"head-wrapper"},[n("ToolBar",{on:{exec:e.execCmd}})],1),n("div",{staticClass:"body-wrapper"},[n("SideDrawer",{staticClass:"sider",attrs:{direction:"ltr"}},[n("ControlPanel")],1),n("FormEditor",{staticClass:"main",attrs:{rows:e.rows,cols:e.cols,cmd:e.cmd},on:{select:e.selectItemHandler},model:{value:e.layout,callback:function(t){e.layout=t},expression:"layout"}}),n("SideDrawer",{staticClass:"sider",attrs:{direction:"rtl"}},[n("AttrConfigurator",{attrs:{formAttrs:e.formAttrs,cellAttrs:e.cellAttrs,controlAttrs:e.controlAttrs,controlType:e.controlType},on:{changeFormAttrs:e.changeFormAttrsHandler,changeCellAttrs:e.changeCellAttrsHandler,changeControlAttrs:e.changeControlAttrsHandler}})],1)],1)])},qt=[],Lt=(n("d81d"),n("b64b"),n("b85c")),Gt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:[e.direction,"drawer-wrapper"]},[n("transition",{attrs:{name:"collapse"}},[e.isCollapse?e._e():n("div",{staticClass:"drawer"},[n("div",{staticClass:"drawer-inner"},[e._t("default")],2)])]),n("div",{class:["handler",e.handlerClz],on:{click:function(t){e.isCollapse=!e.isCollapse}}})],1)},Vt=[],Ht={props:{direction:{type:String,default:"ltr"}},computed:{handlerClz:function(){return"ltr"===this.direction&&this.isCollapse||"rtl"===this.direction&&!this.isCollapse?"el-icon-d-arrow-right":"el-icon-d-arrow-left"}},data:function(){return{isCollapse:!1}}},zt=Ht,Ut=(n("a36d"),Object(m["a"])(zt,Gt,Vt,!1,null,"590434b6",null)),Jt=Ut.exports,Xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-tabs",{staticClass:"configurator-tab",attrs:{stretch:""},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.formAttrForm?n("el-tab-pane",{attrs:{label:"表单属性",name:"form-attr"}},[n("el-form",{ref:"form",staticClass:"form-wrapper",attrs:{size:"mini","label-position":"top"},model:{value:e.formAttrForm,callback:function(t){e.formAttrForm=t},expression:"formAttrForm"}},[n("el-form-item",{attrs:{label:"表单名称",prop:"name"}},[n("el-input",{model:{value:e.formAttrForm.name,callback:function(t){e.$set(e.formAttrForm,"name",t)},expression:"formAttrForm.name"}})],1)],1)],1):e._e(),e.cellAttrForm?n("el-tab-pane",{attrs:{label:"表格属性",name:"cell-attr"}},[n("el-form",{ref:"form",staticClass:"form-wrapper",attrs:{size:"mini","label-position":"top"},model:{value:e.cellAttrForm,callback:function(t){e.cellAttrForm=t},expression:"cellAttrForm"}},[n("el-form-item",{attrs:{label:"文字位置",prop:"textAlign"}},[n("el-select",{model:{value:e.cellAttrForm.textAlign,callback:function(t){e.$set(e.cellAttrForm,"textAlign",t)},expression:"cellAttrForm.textAlign"}},[n("el-option",{attrs:{label:"居中",value:"center"}}),n("el-option",{attrs:{label:"居左",value:"left"}}),n("el-option",{attrs:{label:"居右",value:"right"}})],1)],1),n("el-form-item",{attrs:{label:"背景颜色",prop:"backgroundColor"}},[n("el-color-picker",{attrs:{size:"mini"},model:{value:e.cellAttrForm.backgroundColor,callback:function(t){e.$set(e.cellAttrForm,"backgroundColor",t)},expression:"cellAttrForm.backgroundColor"}})],1),n("el-form-item",{attrs:{label:"文字颜色",prop:"textColor"}},[n("el-color-picker",{attrs:{size:"mini"},model:{value:e.cellAttrForm.textColor,callback:function(t){e.$set(e.cellAttrForm,"textColor",t)},expression:"cellAttrForm.textColor"}})],1)],1)],1):e._e(),e.controlAttrForm?n("el-tab-pane",{attrs:{label:"控件属性",name:"control-attr"}},[n("el-form",{ref:"form",staticClass:"form-wrapper",attrs:{size:"mini","label-position":"top"},model:{value:e.controlAttrForm,callback:function(t){e.controlAttrForm=t},expression:"controlAttrForm"}},e._l(e.configItems,(function(t,i){return n("div",{key:i,staticClass:"line-wrapper"},[n("el-form-item",{attrs:{label:t.fieldName||t.field,prop:t.field}},[n(e.getComp(t.cType),e._g(e._b({tag:"component",model:{value:e.controlAttrForm[t.field],callback:function(n){e.$set(e.controlAttrForm,t.field,n)},expression:"controlAttrForm[item.field]"}},"component",t.config,!1),e.getListeners(t)))],1)],1)})),0)],1):e._e()],1)},Wt=[],Yt=(n("d3b7"),n("25f0"),n("53ca"));function Kt(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()}function Qt(e){if(e&&"object"===Object(Yt["a"])(e)){if(e instanceof Array)return e.map((function(e){return Qt(e)}));for(var t={},n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];t[a]=Qt(e[a])}return t}return e}var Zt,en,tn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-checkbox-group",e._g({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners),e._l(e.options,(function(t,i){return n("el-checkbox",{key:i,attrs:{label:t}},[e._v(" "+e._s(e.isObject(e.options)?i:t)+" ")])})),1)},nn=[],an={model:{prop:"mvalue",event:"mchange"},props:["mvalue"],computed:{value:{get:function(){return this.mvalue},set:function(e){this.$emit("mchange",e)}}},created:function(){this.value=this.defaultValue},methods:{isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)}}},rn=an,on=Object(m["a"])(rn,Zt,en,!1,null,null,null),ln=on.exports,sn={name:"MCheckbox",mixins:[ln],props:{defaultValue:{type:Array,default:function(){return[]}},options:{type:[Array,Object],default:function(){return["选项一","选项二"]}},isRequire:{type:Boolean,default:!1}}},cn=sn,un=(n("6934"),Object(m["a"])(cn,tn,nn,!1,null,"59f7188b",null)),dn=un.exports,pn=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"select",config:{isRequire:!1,multiple:!0,placeholder:"请输入默认值",options:[]}},n={field:"options",fieldName:"选项列表",cType:"inputlist",config:{isRequire:!0,placeholder:"请输入选项列表"},listeners:{change:function(e){t.config.options=e}}},i={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,n,i]},mn=function(){return{field:"字段名称",defaultValue:[],options:["选项一","选项二"],isRequire:!1}},fn={component:dn,createDefaultConf:mn,createConfItems:pn},hn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-radio-group",e._g({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners),e._l(e.options,(function(t,i){return n("el-radio",{key:i,attrs:{label:t}},[e._v(" "+e._s(e.isObject(e.options)?i:t)+" ")])})),1)},vn=[],bn=(n("a9e3"),{name:"MRadio",mixins:[ln],props:{defaultValue:[String,Boolean,Number],options:{type:[Array,Object],default:function(){return["选项一","选项二"]}},isRequire:{type:Boolean,default:!1}}}),gn=bn,yn=(n("87bb"),Object(m["a"])(gn,hn,vn,!1,null,"798b728c",null)),wn=yn.exports,En=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"select",config:{isRequire:!1,placeholder:"请输入默认值",options:[]}},n={field:"options",fieldName:"选项列表",cType:"inputlist",config:{isRequire:!0,placeholder:"请输入选项列表"},listeners:{change:function(e){t.config.options=e}}},i={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,n,i]},xn=function(){return{field:"字段名称",defaultValue:"选项一",options:["选项一","选项二"],isRequire:!1}},Cn={component:wn,createDefaultConf:xn,createConfItems:En},_n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-switch",e._g({attrs:{"active-value":e.options[0],"inactive-value":e.options[1]},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners))},Tn=[],kn={name:"MSwitch",mixins:[ln],props:{defaultValue:[String,Boolean],options:{type:Array,default:function(){return[!0,!1]}}}},Sn=kn,An=Object(m["a"])(Sn,_n,Tn,!1,null,"135955a2",null),Pn=An.exports,jn=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"select",config:{isRequire:!1,options:["是","否"]}};return[e,t]},Nn=function(){return{field:"字段名称",defaultValue:"否",options:["是","否"]}},On={component:Pn,createDefaultConf:Nn,createConfItems:jn},Dn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-input",e._g({attrs:{placeholder:e.placeholder},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners))},Fn=[],Mn={name:"MInput",mixins:[ln],props:{defaultValue:{type:String,default:function(){return""}},isRequire:{type:Boolean,default:!1},placeholder:String}},Bn=Mn,In=Object(m["a"])(Bn,Dn,Fn,!1,null,null,null),Rn=In.exports,$n=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"input",config:{isRequire:!1,placeholder:"请输入默认值"}},n={field:"placeholder",fieldName:"占位文本",cType:"input",config:{isRequire:!1,placeholder:"请输入占位文本"}},i={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,n,i]},qn=function(){return{field:"字段名称",defaultValue:"",placeholder:"请输入内容",isRequire:!1}},Ln={component:Rn,createDefaultConf:qn,createConfItems:$n},Gn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.value,(function(t,i){return n("div",{key:i,staticClass:"input-wrapper"},[n("el-input",{attrs:{size:"mini",placeholder:e.placeholder},on:{change:e.emitChangeEvent},model:{value:e.value[i],callback:function(t){e.$set(e.value,i,t)},expression:"value[idx]"}}),e.value.length>1?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.deleteItem(i)}}},[n("i",{staticClass:"el-icon-minus"})]):e._e()],1)})),n("div",{staticClass:"add-item",on:{click:e.addItem}},[n("el-button",{attrs:{type:"primary",size:"mini"}},[n("i",{staticClass:"el-icon-plus"})]),n("span",{staticClass:"add-item__desc"},[e._v("添加选项")])],1)],2)},Vn=[],Hn=(n("4de4"),n("a434"),{name:"MInputList",mixins:[ln],props:{defaultValue:{type:Array,default:function(){return[""]}},isRequire:{type:Boolean,default:!0},placeholder:{type:String,default:""}},watch:{value:function(){this.emitChangeEvent()}},methods:{deleteItem:function(e){this.value.splice(e,1)},addItem:function(){this.value.push("")},emitChangeEvent:function(){this.$emit("change",this.value.filter(Boolean))}}}),zn=Hn,Un=(n("31f7"),Object(m["a"])(zn,Gn,Vn,!1,null,"48c38719",null)),Jn=Un.exports,Xn=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"inputlist",config:{isRequire:!0,placeholder:"请输入默认值"}},n={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,n]},Wn=function(){return{field:"字段名称",defaultValue:[""],isRequire:!1}},Yn={component:Jn,createDefaultConf:Wn,createConfItems:Xn},Kn=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-select",e._g({attrs:{placeholder:e.placeholder,multiple:e.multiple,filterable:e.filterable,"allow-create":e.allowCreate,"default-first-option":e.defaultFirstOption,clearable:e.clearable},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners),e._l(e.options,(function(t,i){return n("el-option",{key:i,attrs:{label:e.isObject(e.options)?i:t,value:t}})})),1)},Qn=[],Zn={name:"MSelect",mixins:[ln],props:{defaultValue:[String,Array],options:[Array,Object],isRequire:Boolean,placeholder:String,multiple:Boolean,filterable:Boolean,allowCreate:Boolean,defaultFirstOption:Boolean,clearable:Boolean}},ei=Zn,ti=Object(m["a"])(ei,Kn,Qn,!1,null,null,null),ni=ti.exports,ii=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"select",config:{isRequire:!1,placeholder:"请选择默认值",clearable:!0,multiple:!1,allowCreate:!1,filterable:!0,defaultFirstOption:!0,options:[]}},n={field:"options",fieldName:"选项列表",cType:"inputlist",config:{isRequire:!0,placeholder:"请输入选项列表"},listeners:{change:function(e){t.config.options=e}}},i={field:"clearable",fieldName:"是否可清除",cType:"switch",config:{isRequire:!1,defaultValue:!0,options:[!0,!1]}},a={field:"multiple",fieldName:"是否可多选",cType:"switch",config:{isRequire:!1,defaultValue:!1,options:[!0,!1]},listeners:{change:function(e,n){n.defaultValue=null,setTimeout((function(){t.config.multiple=e,e&&(n.defaultValue=[])}),0)}}},r={field:"allowCreate",fieldName:"是否可创建",cType:"switch",config:{isRequire:!1,defaultValue:!1,options:[!0,!1]}},o={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,n,i,a,r,o]},ai=function(){return{field:"字段名称",defaultValue:"选项一",options:["选项一","选项二"],multiple:!1,clearable:!0,allowCreate:!1,filterable:!0,defaultFirstOption:!0,isRequire:!1}},ri={component:ni,createDefaultConf:ai,createConfItems:ii},oi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-time-picker",e._g({attrs:{placeholder:e.placeholder},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners))},li=[],si={name:"MDateTimePicker",mixins:[ln],props:{defaultValue:[String,Number,Object],isRequire:{type:Boolean,default:!1},isSelectNow:Boolean,placeholder:String},watch:{isSelectNow:function(e){this.value=e?Date.now():null}},created:function(){this.isSelectNow&&(this.value=Date.now())}},ci=si,ui=Object(m["a"])(ci,oi,li,!1,null,"635838a8",null),di=ui.exports,pi=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"isSelectNow",fieldName:"是否选中当前日期",cType:"radio",config:{defaultValue:!1,options:{"是":!0,"否":!1}}},n={field:"placeholder",fieldName:"占位文本",cType:"input",config:{isRequire:!1,placeholder:"请输入占位文本"}},i={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,n,i]},mi=function(){return{field:"字段名称",isSelectNow:!1,placeholder:"请选择时间",isRequire:!1}},fi={component:di,createDefaultConf:mi,createConfItems:pi},hi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-date-picker",e._g({attrs:{type:"date",placeholder:e.placeholder},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners))},vi=[],bi={name:"MDatePicker",mixins:[ln],props:{defaultValue:[String,Number,Object],isRequire:{type:Boolean,default:!1},isSelectNow:Boolean,placeholder:String},watch:{isSelectNow:function(e){this.value=e?Date.now():null}},created:function(){this.isSelectNow&&(this.value=Date.now())}},gi=bi,yi=Object(m["a"])(gi,hi,vi,!1,null,null,null),wi=yi.exports,Ei=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"isSelectNow",fieldName:"是否选中当前日期",cType:"radio",config:{defaultValue:!1,options:{"是":!0,"否":!1}}},n={field:"placeholder",fieldName:"占位文本",cType:"input",config:{isRequire:!1,placeholder:"请输入占位文本"}},i={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,n,i]},xi=function(){return{field:"字段名称",isSelectNow:!1,placeholder:"请选择日期",isRequire:!1}},Ci={component:wi,createDefaultConf:xi,createConfItems:Ei},_i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-date-picker",e._g({attrs:{type:"datetime",placeholder:e.placeholder},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners))},Ti=[],ki={name:"MDateTimePicker",mixins:[ln],props:{defaultValue:[String,Number,Object],isRequire:{type:Boolean,default:!1},isSelectNow:Boolean,placeholder:String},watch:{isSelectNow:function(e){this.value=e?Date.now():null}},created:function(){this.isSelectNow&&(this.value=Date.now())}},Si=ki,Ai=Object(m["a"])(Si,_i,Ti,!1,null,null,null),Pi=Ai.exports,ji=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"isSelectNow",fieldName:"是否选中当前日期",cType:"radio",config:{defaultValue:!1,options:{"是":!0,"否":!1}}},n={field:"placeholder",fieldName:"占位文本",cType:"input",config:{isRequire:!1,placeholder:"请输入占位文本"}},i={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,n,i]},Ni=function(){return{field:"字段名称",isSelectNow:!1,placeholder:"请选择日期时间",isRequire:!1}},Oi={component:Pi,createDefaultConf:Ni,createConfItems:ji},Di={radio:Cn,checkbox:fn,switch:On,input:Ln,inputlist:Yn,select:ri,timepicker:fi,datepicker:Ci,datetimepicker:Oi},Fi={props:{formAttrs:Object,cellAttrs:Object,controlType:String,controlAttrs:Object},data:function(){return{activeName:"form-attr",formAttrForm:null,cellAttrForm:null,controlAttrForm:null}},computed:{configItems:function(){if(this.controlAttrs){var e=Di[this.controlType].createConfItems;return e()}return[]}},watch:{controlAttrs:function(e){this.activeName=e?"control-attr":"form-attr",this.initControlAttrForm()},cellAttrs:function(e){this.controlType&&"text"!==this.controlType||(this.activeName=e?"cell-attr":"form-attr"),this.initCellAttrForm()},formAttrForm:{deep:!0,handler:function(e){this.$emit("changeFormAttrs",e)}},cellAttrForm:{deep:!0,handler:function(e){this.$emit("changeCellAttrs",e)}},controlAttrForm:{deep:!0,handler:function(e){this.$emit("changeControlAttrs",e)}}},mounted:function(){this.formAttrForm=Qt(this.formAttrs||{})},methods:{handleTabClick:function(){},initControlAttrForm:function(){var e=this;if(this.controlAttrs&&"text"!==this.controlType){var t=Qt(this.controlAttrs);this.controlAttrForm={},this.$nextTick((function(){e.controlAttrForm=t}))}else this.controlAttrForm=null},initCellAttrForm:function(){var e=this;if(this.cellAttrs){var t=Qt(this.cellAttrs);this.cellAttrForm={},this.$nextTick((function(){e.cellAttrForm=t}))}else this.cellAttrForm=null},getComp:function(e){var t=Di[e];return t?t.component:null},getListeners:function(e){var t=this,n={},i=e.listeners;if(!i||!Kt(i))return n;for(var a=function(){var e=o[r];if("function"!==typeof i[e])return"continue";n[e]=function(n){return i[e].call(null,n,t.controlAttrForm)}},r=0,o=Object.keys(i);r<o.length;r++)a();return n}}},Mi=Fi,Bi=(n("e4ef"),Object(m["a"])(Mi,Xt,Wt,!1,null,"5d53643e",null)),Ii=Bi.exports,Ri=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu-wrapper"},[n("ul",{staticClass:"list-wrapper"},e._l(e.formItems,(function(t,i){return n("li",{directives:[{name:"dragger",rawName:"v-dragger",value:t,expression:"item"}],key:t.cType,class:["item-wrapper",e.selectedIdx===i?"selected":""],on:{click:function(t){return e.selectItem(i)},dblclick:function(n){return e.emitItem(t)}}},[n("div",{staticClass:"item-content"},["radio"===t.cType?n("i",{staticClass:"iconfont icon-danxuankuang"}):"checkbox"===t.cType?n("i",{staticClass:"iconfont icon-duoxuankuang"}):"switch"===t.cType?n("i",{staticClass:"iconfont icon-kaiguan"}):"input"===t.cType?n("i",{staticClass:"iconfont icon-shurukuang"}):"select"===t.cType?n("i",{staticClass:"iconfont icon-xialacaidan"}):"timepicker"===t.cType?n("i",{staticClass:"iconfont icon-shijianxuanze"}):"datepicker"===t.cType?n("i",{staticClass:"iconfont icon-riqixuanze"}):"datetimepicker"===t.cType?n("i",{staticClass:"iconfont icon-riqishijian"}):e._e()]),n("div",{staticClass:"item-title"},[e._v(e._s(t.name))])])})),0)])},$i=[],qi={data:function(){return{startDrag:!1,formItems:[{cType:"radio",name:"单选框"},{cType:"checkbox",name:"多选框"},{cType:"switch",name:"开关"},{cType:"input",name:"输入框"},{cType:"select",name:"选择器"},{cType:"timepicker",name:"时间选择器"},{cType:"datepicker",name:"日期选择器"},{cType:"datetimepicker",name:"日期时间选择器"}],options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],selectedIdx:-1}},methods:{selectItem:function(e){this.selectedIdx===e?this.selectedIdx=-1:this.selectedIdx=e},emitItem:function(e){var t=e.cType;this.$emit("add",{id:Date.now().toString(16),ccType:t})},startDragHandler:function(){}}},Li=qi,Gi=(n("4d78"),Object(m["a"])(Li,Ri,$i,!1,null,"3145f6b0",null)),Vi=Gi.exports,Hi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor-wrapper"},[n("table",{ref:"table",staticClass:"editor-main"},e._l(e.rows,(function(t){return n("tr",{key:t},[e._l(e.cells,(function(i,a){return[i&&i.start[1]===t?n("td",{directives:[{name:"dropper",rawName:"v-dropper",value:e.dropEvent,expression:"dropEvent"}],key:a,class:["editor-cell",e.selectedMap[a]>-1?"selected":""],style:e.cellStyle(i,a),attrs:{"data-idx":e.calcIdx(i.start[0],i.start[1]),colspan:e.colspan(i),rowspan:e.rowspan(i)},on:{mousedown:function(t){return e.cellBindEvent(t,a)}}},["text"===i.cType?n("div",{ref:"text"+a,refInFor:!0,staticClass:"editor-text-content",on:{input:function(t){return e.cellInputHandler(i,t)},blur:function(t){return e.cellBlurHandler(i,t)}}},[e._v(" "+e._s(i.content)+" ")]):n("div",[n(e.compMap[i.cType],e._b({tag:"component",model:{value:i.value,callback:function(t){e.$set(i,"value",t)},expression:"cell.value"}},"component",i.content,!1)),i.cType&&"text"!==i.cType?n("el-button",{staticClass:"el-icon-delete-solid clear-content",attrs:{type:"text",title:"清除内容"},on:{click:function(t){return e.clearContent(a)}}}):e._e()],1)]):e._e()]}))],2)})),0)])},zi=[],Ui=(n("13d5"),n("6062"),n("3ca3"),n("ddb0"),n("2909")),Ji={model:{event:"change",prop:"layout"},props:{cmd:String,rows:{type:Number,default:0},cols:{type:Number,default:0},layout:{type:Array,default:function(){return[]}}},data:function(){return{editIdx:-1,selected:[],cells:[]}},computed:{compMap:function(){for(var e={},t=0,n=Object.keys(Di);t<n.length;t++){var i=n[t];e[i]=Di[i].component}return e},selectedMap:function(){return this.selected.reduce((function(e,t){return e[t]=1,e}),{})}},watch:{cmd:function(e){"merge"===e?this.mergeCell():"split"===e&&this.splitCell()},layout:function(e){this.cells!==e&&this.initCells()}},mounted:function(){this.initCells()},methods:{initCells:function(){this.cells=this.layout.map((function(e){return e?{start:e.start,end:e.end,state:e.state||"cell",cType:e.cType||"text",content:e.content||"",attrs:e.attrs||{}}:null})),this.emitEvent()},emitEvent:function(){this.$emit("change",this.cells)},colspan:function(e){return e.end[0]-e.start[0]+1},rowspan:function(e){return e.end[1]-e.start[1]+1},cellStyle:function(e,t){return{width:this.cellWidth(t),height:this.cellHeight(t),lineHeight:this.cellHeight(t),textAlign:e.attrs.textAlign||"center",backgroundColor:e.attrs.backgroundColor,color:e.attrs.textColor,fontSize:e.attrs.fontSize}},cellWidth:function(e){var t=this.cells[e];return"".concat(100*this.colspan(t)/this.cols,"%")},cellHeight:function(e){var t=this.cells[e];return"".concat(.25*this.rowspan(t),"rem")},calcIdx:function(e,t){return(t-1)*this.cols+e-1},mergeCell:function(){if(!(this.selected.length<=1)){var e,t=Object(Lt["a"])(this.selected);try{for(t.s();!(e=t.n()).done;){var n=e.value;if("merge"===this.cells[n].state)return}}catch(l){t.e(l)}finally{t.f()}var i=this.selected,a=Object(Ui["a"])(this.cells),r=a[i[0]],o=a[i[i.length-1]];r.end[0]=o.end[0],r.end[1]=o.end[1],r.state="merge",this.cells=a.map((function(e,t){return i.indexOf(t)>0?null:e})),this.selected=[this.selected[0]],this.emitEvent()}},splitCell:function(){var e,t=Object(Ui["a"])(this.selected),n=Object(Ui["a"])(this.cells),i=this.cells[t[0]],a=i.cType,r=i.content,o=Object(Lt["a"])(t);try{for(o.s();!(e=o.n()).done;){var l=e.value;if(n[l]&&"merge"===n[l].state)for(var s=n[l],c=s.start,u=s.end,d=c[1];d<=u[1];d++)for(var p=c[0];p<=u[0];p++){var m=this.calcIdx(p,d);this.cells[m]={start:[p,d],end:[p,d],state:"cell"},-1===t.indexOf(m)&&t.push(m)}}}catch(f){o.e(f)}finally{o.f()}this.cells[t[0]].cType=a,this.cells[t[0]].content=r,this.selected=t.sort((function(e,t){return e-t})),this.emitEvent()},dropEvent:function(e,t){var n=Number(t.currentTarget.dataset.idx),i=e.cType,a=Di[i].createDefaultConf;this.cells[n].cType=i,this.cells[n].content=a(),this.selected=[n],this.$emit("select",this.selected),this.emitEvent()},cellBlurHandler:function(e,t){var n=t.currentTarget;n.contentEditable=!1,n.innerText=e.content,this.editIdx=-1,this.emitEvent()},cellInputHandler:function(e,t){e.content=t.currentTarget.innerText},clearContent:function(e){this.$set(this.cells[e],"cType","text"),this.$set(this.cells[e],"content",""),this.emitEvent()},cellBindEvent:function(e,t){for(var n=this,i=e.currentTarget,a=!0,r=e.pageX,o=e.pageY,l=this.$refs.table.querySelectorAll("td"),s=[],c=0;c<l.length;c++){var u=l[c],d=Number(u.dataset.idx);s[d]=u.getBoundingClientRect()}var p=function(e){if(e.preventDefault(),!(n.editIdx>-1)){var t=e.pageX,i=e.pageY,l=t-r,c=i-o;if(a&&l*l+c*c>10&&(a=!1),!a){for(var u=Math.min(r,t),d=Math.min(o,i),p=Math.abs(l),m=Math.abs(c),f=[],h=0;h<s.length;h++)if(s[h]){var v=s[h];Xi(v.left,v.top,v.width,v.height,u,d,p,m)&&f.push(h)}n.selected=Object(Ui["a"])(new Set(f))}}},m=function e(i){i.preventDefault(),document.removeEventListener("mousemove",p,!1),document.removeEventListener("mouseup",e,!1),n.editIdx>-1||(a?-1===n.editIdx&&(n.selected=[t],n.$emit("select",n.selected)):(n.selected=n.selected.sort((function(e,t){return e-t})),n.$emit("select",n.selected)))};if(document.addEventListener("mousemove",p,!1),document.addEventListener("mouseup",m,!1),"text"===this.cells[t].cType){if(i.clicked){i.clicked=!1,this.selected=[],this.editIdx=t;var f=this.$refs["text"+t][0];return f.contentEditable=!0,void f.focus()}i.clicked=!0,setTimeout((function(){i.clicked=!1}),200)}}}};function Xi(e,t,n,i,a,r,o,l){return!(e>a&&e>a+o)&&(!(e<a&&e+n<a)&&(!(t>r&&t>r+l)&&!(t<r&&t+i<r)))}var Wi=Ji,Yi=(n("ffbc"),Object(m["a"])(Wi,Hi,zi,!1,null,"fa41872c",null)),Ki=Yi.exports,Qi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-button",{on:{click:function(t){return e.$emit("exec","merge")}}},[e._v("合并")]),n("el-button",{on:{click:function(t){return e.$emit("exec","split")}}},[e._v("拆分")]),n("el-button",{on:{click:function(t){return e.$emit("exec","save")}}},[e._v("保存")])],1)},Zi=[],ea={},ta=ea,na=Object(m["a"])(ta,Qi,Zi,!1,null,"1b67930e",null),ia=na.exports,aa={components:{AttrConfigurator:Ii,ControlPanel:Vi,FormEditor:Ki,ToolBar:ia,SideDrawer:Jt},data:function(){return{cmd:"",rows:10,cols:24,layout:[],formAttrs:{name:"表单名称"},selected:[]}},computed:{selectedCells:function(){var e=this;return this.selected.map((function(t){return e.layout[t]}))},cellAttrs:function(){return 1===this.selectedCells.length?this.selectedCells[0].attrs:this.selectedCells.length>1?{}:null},controlType:function(){return 1===this.selectedCells.length?this.selectedCells[0].cType:null},controlAttrs:function(){if(1===this.selectedCells.length){var e=this.selectedCells[0];return"text"!==e.cType?e.content:null}return null}},created:function(){this.initLayout()},mounted:function(){var e=this;window.onbeforeunload=function(){if(JSON.stringify(e.layout)!==window.localStorage.getItem("formjson"))return"表单未保存，是否继续退出?"}},methods:{initLayout:function(){var e=window.localStorage.getItem("formjson");if(e)this.layout=JSON.parse(e);else{for(var t=[],n=1;n<=this.rows;n++)for(var i=1;i<=this.cols;i++)t.push({start:[i,n],end:[i,n]});this.layout=t}},execCmd:function(e){var t=this;"save"!==e?(this.cmd=e,this.$nextTick((function(){t.cmd=""}))):window.localStorage.setItem("formjson",JSON.stringify(this.layout))},changeFormAttrsHandler:function(e){this.formAttrs=e},changeCellAttrsHandler:function(e){if(1===this.selectedCells.length)for(var t=this.selectedCells[0].attrs,n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];this.$set(t,a,e[a])}else{var r,o=Object(Lt["a"])(this.selectedCells);try{for(o.s();!(r=o.n()).done;)for(var l=r.value,s=l.attrs,c=0,u=Object.keys(e);c<u.length;c++){var d=u[c];this.$set(s,d,e[d])}}catch(p){o.e(p)}finally{o.f()}}},changeControlAttrsHandler:function(e){if(this.controlAttrs)for(var t=this.selectedCells[0].content,n=0,i=Object.keys(e);n<i.length;n++){var a=i[n];this.$set(t,a,e[a])}},selectItemHandler:function(e){this.selected=e}}},ra=aa,oa=(n("17dc"),Object(m["a"])(ra,$t,qt,!1,null,"b49c7f6c",null)),la=oa.exports,sa=[{path:"/",redirect:"/form"},{path:"/form",component:la},{path:"/workflow",component:h},{path:"/workflow2",component:kt},{path:"/workflow3",component:Rt}],ca=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},ua=[];n("a342");var da={name:"App"},pa=da,ma=(n("034f"),Object(m["a"])(pa,ca,ua,!1,null,null,null)),fa=ma.exports;r["default"].use(o["a"]),r["default"].config.productionTip=!1,r["default"].directive("dragger",{inserted:function(e,t){var n=t.value;e.draggable=!0,e.addEventListener("dragstart",(function(e){e.dataTransfer.setData("text",JSON.stringify(n))}))}}),r["default"].directive("dropper",{inserted:function(e,t){var n=t.value;"function"===typeof n&&(e.addEventListener("dragover",(function(e){try{e.preventDefault(),e.dataTransfer.dropEffect="move"}catch(e){console.error(e)}})),e.addEventListener("drop",(function(e){try{var t=e.dataTransfer.getData("text");if(t&&t.trim()){var i=JSON.parse(t.trim());n.call(null,i,e)}}catch(e){console.error(e)}})))}}),r["default"].use(a.a,{size:"mini",zIndex:3e3}),new r["default"]({router:new o["a"]({routes:sa}),render:function(e){return e(fa)}}).$mount("#app")},5882:function(e,t,n){},6934:function(e,t,n){"use strict";var i=n("4601"),a=n.n(i);a.a},8533:function(e,t,n){},"85ec":function(e,t,n){},"87bb":function(e,t,n){"use strict";var i=n("3e0d"),a=n.n(i);a.a},"89ae":function(e,t,n){},"8bdd":function(e,t,n){},9678:function(e,t,n){"use strict";var i=n("9853"),a=n.n(i);a.a},9853:function(e,t,n){},"9eff":function(e,t,n){},a342:function(e,t,n){},a36d:function(e,t,n){"use strict";var i=n("cfa0"),a=n.n(i);a.a},ae0a:function(e,t,n){"use strict";n.r(t);var i=n("3665"),a=n("87f2");i["a"].prototype._createEntries=function(e,t){var n=[],i=this;return Object(a["forEach"])(t,(function(t){if(t.target&&"bpmn:ComplexGateway"!==t.target.type&&"bpmn:EventBasedGateway"!==t.target.type){var a=i._createMenuEntry(t,e);n.push(a)}})),n}},cfa0:function(e,t,n){},e4ef:function(e,t,n){"use strict";var i=n("5882"),a=n.n(i);a.a},eb2a:function(e){e.exports=JSON.parse('{"name":"Fullsee","prefix":"fullsee","uri":"http://fullsee","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"}]}]}')},ffbc:function(e,t,n){"use strict";var i=n("050a"),a=n.n(i);a.a}});
//# sourceMappingURL=app.0199293c.js.map