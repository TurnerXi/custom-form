(function(e){function t(t){for(var n,o,a=t[0],c=t[1],s=t[2],f=0,d=[];f<a.length;f++)o=a[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,s||[]),l()}function l(){for(var e,t=0;t<r.length;t++){for(var l=r[t],n=!0,a=1;a<l.length;a++){var c=l[a];0!==i[c]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=l[0]))}return e}var n={},i={app:0},r=[];function o(t){if(n[t])return n[t].exports;var l=n[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=e,o.c=n,o.d=function(e,t,l){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(l,n,function(t){return e[t]}.bind(null,n));return l},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var s=0;s<a.length;s++)t(a[s]);var u=c;r.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},"034f":function(e,t,l){"use strict";var n=l("85ec"),i=l.n(n);i.a},"050a":function(e,t,l){},"17dc":function(e,t,l){"use strict";var n=l("2f35"),i=l.n(n);i.a},"2f35":function(e,t,l){},"31f7":function(e,t,l){"use strict";var n=l("8533"),i=l.n(n);i.a},"3e0d":function(e,t,l){},4601:function(e,t,l){},"4d78":function(e,t,l){"use strict";var n=l("89ae"),i=l.n(n);i.a},"56d7":function(e,t,l){"use strict";l.r(t);l("498a"),l("0fae");var n=l("9e2f"),i=l.n(n),r=(l("e260"),l("e6cf"),l("cca6"),l("a79d"),l("2b0e")),o=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{attrs:{id:"app"}},[l("FormBuilder")],1)},a=[],c=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"wrapper"},[l("div",{staticClass:"head-wrapper"},[l("ToolBar",{on:{exec:e.execCmd}})],1),l("div",{staticClass:"body-wrapper"},[l("SideDrawer",{staticClass:"sider",attrs:{direction:"ltr"}},[l("ControlPanel")],1),l("FormEditor",{staticClass:"main",attrs:{rows:e.rows,cols:e.cols,cmd:e.cmd},on:{select:e.selectItemHandler},model:{value:e.layout,callback:function(t){e.layout=t},expression:"layout"}}),l("SideDrawer",{staticClass:"sider",attrs:{direction:"rtl"}},[l("AttrConfigurator",{attrs:{formAttrs:e.formAttrs,cellAttrs:e.cellAttrs,controlAttrs:e.controlAttrs,controlType:e.controlType},on:{changeFormAttrs:e.changeFormAttrsHandler,changeCellAttrs:e.changeCellAttrsHandler,changeControlAttrs:e.changeControlAttrsHandler}})],1)],1)])},s=[],u=(l("d81d"),l("b64b"),l("b85c")),f=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{class:[e.direction,"drawer-wrapper"]},[l("transition",{attrs:{name:"collapse"}},[e.isCollapse?e._e():l("div",{staticClass:"drawer"},[l("div",{staticClass:"drawer-inner"},[e._t("default")],2)])]),l("div",{class:["handler",e.handlerClz],on:{click:function(t){e.isCollapse=!e.isCollapse}}})],1)},d=[],p={props:{direction:{type:String,default:"ltr"}},computed:{handlerClz:function(){return"ltr"===this.direction&&this.isCollapse||"rtl"===this.direction&&!this.isCollapse?"el-icon-d-arrow-right":"el-icon-d-arrow-left"}},data:function(){return{isCollapse:!1}}},m=p,h=(l("a36d"),l("2877")),v=Object(h["a"])(m,f,d,!1,null,"590434b6",null),g=v.exports,b=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-tabs",{staticClass:"configurator-tab",attrs:{stretch:""},on:{"tab-click":e.handleTabClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[e.formAttrForm?l("el-tab-pane",{attrs:{label:"表单属性",name:"form-attr"}},[l("el-form",{ref:"form",staticClass:"form-wrapper",attrs:{size:"mini","label-position":"top"},model:{value:e.formAttrForm,callback:function(t){e.formAttrForm=t},expression:"formAttrForm"}},[l("el-form-item",{attrs:{label:"表单名称",prop:"name"}},[l("el-input",{model:{value:e.formAttrForm.name,callback:function(t){e.$set(e.formAttrForm,"name",t)},expression:"formAttrForm.name"}})],1)],1)],1):e._e(),e.cellAttrForm?l("el-tab-pane",{attrs:{label:"表格属性",name:"cell-attr"}},[l("el-form",{ref:"form",staticClass:"form-wrapper",attrs:{size:"mini","label-position":"top"},model:{value:e.cellAttrForm,callback:function(t){e.cellAttrForm=t},expression:"cellAttrForm"}},[l("el-form-item",{attrs:{label:"文字位置",prop:"textAlign"}},[l("el-select",{model:{value:e.cellAttrForm.textAlign,callback:function(t){e.$set(e.cellAttrForm,"textAlign",t)},expression:"cellAttrForm.textAlign"}},[l("el-option",{attrs:{label:"居中",value:"center"}}),l("el-option",{attrs:{label:"居左",value:"left"}}),l("el-option",{attrs:{label:"居右",value:"right"}})],1)],1),l("el-form-item",{attrs:{label:"背景颜色",prop:"backgroundColor"}},[l("el-color-picker",{attrs:{size:"mini"},model:{value:e.cellAttrForm.backgroundColor,callback:function(t){e.$set(e.cellAttrForm,"backgroundColor",t)},expression:"cellAttrForm.backgroundColor"}})],1),l("el-form-item",{attrs:{label:"文字颜色",prop:"textColor"}},[l("el-color-picker",{attrs:{size:"mini"},model:{value:e.cellAttrForm.textColor,callback:function(t){e.$set(e.cellAttrForm,"textColor",t)},expression:"cellAttrForm.textColor"}})],1)],1)],1):e._e(),e.controlAttrForm?l("el-tab-pane",{attrs:{label:"控件属性",name:"control-attr"}},[l("el-form",{ref:"form",staticClass:"form-wrapper",attrs:{size:"mini","label-position":"top"},model:{value:e.controlAttrForm,callback:function(t){e.controlAttrForm=t},expression:"controlAttrForm"}},e._l(e.configItems,(function(t,n){return l("div",{key:n,staticClass:"line-wrapper"},[l("el-form-item",{attrs:{label:t.fieldName||t.field,prop:t.field}},[l(e.getComp(t.cType),e._g(e._b({tag:"component",model:{value:e.controlAttrForm[t.field],callback:function(l){e.$set(e.controlAttrForm,t.field,l)},expression:"controlAttrForm[item.field]"}},"component",t.config,!1),e.getListeners(t)))],1)],1)})),0)],1):e._e()],1)},y=[],C=(l("d3b7"),l("25f0"),l("53ca"));function x(e){return"[object object]"===Object.prototype.toString.call(e).toLowerCase()}function w(e){if(e&&"object"===Object(C["a"])(e)){if(e instanceof Array)return e.map((function(e){return w(e)}));for(var t={},l=0,n=Object.keys(e);l<n.length;l++){var i=n[l];t[i]=w(e[i])}return t}return e}var T,A,k=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-checkbox-group",e._g({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners),e._l(e.options,(function(t,n){return l("el-checkbox",{key:n,attrs:{label:t}},[e._v(" "+e._s(e.isObject(e.options)?n:t)+" ")])})),1)},_=[],N={model:{prop:"mvalue",event:"mchange"},props:["mvalue"],computed:{value:{get:function(){return this.mvalue},set:function(e){this.$emit("mchange",e)}}},created:function(){this.value=this.defaultValue},methods:{isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)}}},j=N,O=Object(h["a"])(j,T,A,!1,null,null,null),F=O.exports,S={name:"MCheckbox",mixins:[F],props:{defaultValue:{type:Array,default:function(){return[]}},options:{type:[Array,Object],default:function(){return["选项一","选项二"]}},isRequire:{type:Boolean,default:!1}}},$=S,q=(l("6934"),Object(h["a"])($,k,_,!1,null,"59f7188b",null)),R=q.exports,I=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"select",config:{isRequire:!1,multiple:!0,placeholder:"请输入默认值",options:[]}},l={field:"options",fieldName:"选项列表",cType:"inputlist",config:{isRequire:!0,placeholder:"请输入选项列表"},listeners:{change:function(e){t.config.options=e}}},n={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,l,n]},E=function(){return{field:"字段名称",defaultValue:[],options:["选项一","选项二"],isRequire:!1}},V={component:R,createDefaultConf:E,createConfItems:I},D=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-radio-group",e._g({model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners),e._l(e.options,(function(t,n){return l("el-radio",{key:n,attrs:{label:t}},[e._v(" "+e._s(e.isObject(e.options)?n:t)+" ")])})),1)},B=[],M=(l("a9e3"),{name:"MRadio",mixins:[F],props:{defaultValue:[String,Boolean,Number],options:{type:[Array,Object],default:function(){return["选项一","选项二"]}},isRequire:{type:Boolean,default:!1}}}),H=M,z=(l("87bb"),Object(h["a"])(H,D,B,!1,null,"798b728c",null)),L=z.exports,P=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"select",config:{isRequire:!1,placeholder:"请输入默认值",options:[]}},l={field:"options",fieldName:"选项列表",cType:"inputlist",config:{isRequire:!0,placeholder:"请输入选项列表"},listeners:{change:function(e){t.config.options=e}}},n={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,l,n]},J=function(){return{field:"字段名称",defaultValue:"选项一",options:["选项一","选项二"],isRequire:!1}},W={component:L,createDefaultConf:J,createConfItems:P},X=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-switch",e._g({attrs:{"active-value":e.options[0],"inactive-value":e.options[1]},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners))},Y=[],G={name:"MSwitch",mixins:[F],props:{defaultValue:[String,Boolean],options:{type:Array,default:function(){return[!0,!1]}}}},K=G,Q=Object(h["a"])(K,X,Y,!1,null,"135955a2",null),U=Q.exports,Z=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"select",config:{isRequire:!1,options:["是","否"]}};return[e,t]},ee=function(){return{field:"字段名称",defaultValue:"否",options:["是","否"]}},te={component:U,createDefaultConf:ee,createConfItems:Z},le=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-input",e._g({attrs:{placeholder:e.placeholder},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners))},ne=[],ie={name:"MInput",mixins:[F],props:{defaultValue:{type:String,default:function(){return""}},isRequire:{type:Boolean,default:!1},placeholder:String}},re=ie,oe=Object(h["a"])(re,le,ne,!1,null,null,null),ae=oe.exports,ce=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"input",config:{isRequire:!1,placeholder:"请输入默认值"}},l={field:"placeholder",fieldName:"占位文本",cType:"input",config:{isRequire:!1,placeholder:"请输入占位文本"}},n={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,l,n]},se=function(){return{field:"字段名称",defaultValue:"",placeholder:"请输入内容",isRequire:!1}},ue={component:ae,createDefaultConf:se,createConfItems:ce},fe=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[e._l(e.value,(function(t,n){return l("div",{key:n,staticClass:"input-wrapper"},[l("el-input",{attrs:{size:"mini",placeholder:e.placeholder},on:{change:e.emitChangeEvent},model:{value:e.value[n],callback:function(t){e.$set(e.value,n,t)},expression:"value[idx]"}}),e.value.length>1?l("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.deleteItem(n)}}},[l("i",{staticClass:"el-icon-minus"})]):e._e()],1)})),l("div",{staticClass:"add-item",on:{click:e.addItem}},[l("el-button",{attrs:{type:"primary",size:"mini"}},[l("i",{staticClass:"el-icon-plus"})]),l("span",{staticClass:"add-item__desc"},[e._v("添加选项")])],1)],2)},de=[],pe=(l("4de4"),l("a434"),{name:"MInputList",mixins:[F],props:{defaultValue:{type:Array,default:function(){return[""]}},isRequire:{type:Boolean,default:!0},placeholder:{type:String,default:""}},watch:{value:function(){this.emitChangeEvent()}},methods:{deleteItem:function(e){this.value.splice(e,1)},addItem:function(){this.value.push("")},emitChangeEvent:function(){this.$emit("change",this.value.filter(Boolean))}}}),me=pe,he=(l("31f7"),Object(h["a"])(me,fe,de,!1,null,"48c38719",null)),ve=he.exports,ge=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"inputlist",config:{isRequire:!0,placeholder:"请输入默认值"}},l={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,l]},be=function(){return{field:"字段名称",defaultValue:[""],isRequire:!1}},ye={component:ve,createDefaultConf:be,createConfItems:ge},Ce=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-select",e._g({attrs:{placeholder:e.placeholder,multiple:e.multiple,filterable:e.filterable,"allow-create":e.allowCreate,"default-first-option":e.defaultFirstOption,clearable:e.clearable},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners),e._l(e.options,(function(t,n){return l("el-option",{key:n,attrs:{label:e.isObject(e.options)?n:t,value:t}})})),1)},xe=[],we={name:"MSelect",mixins:[F],props:{defaultValue:[String,Array],options:[Array,Object],isRequire:Boolean,placeholder:String,multiple:Boolean,filterable:Boolean,allowCreate:Boolean,defaultFirstOption:Boolean,clearable:Boolean}},Te=we,Ae=Object(h["a"])(Te,Ce,xe,!1,null,null,null),ke=Ae.exports,_e=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"defaultValue",fieldName:"默认值",cType:"select",config:{isRequire:!1,placeholder:"请选择默认值",clearable:!0,multiple:!1,allowCreate:!1,filterable:!0,defaultFirstOption:!0,options:[]}},l={field:"options",fieldName:"选项列表",cType:"inputlist",config:{isRequire:!0,placeholder:"请输入选项列表"},listeners:{change:function(e){t.config.options=e}}},n={field:"clearable",fieldName:"是否可清除",cType:"switch",config:{isRequire:!1,defaultValue:!0,options:[!0,!1]}},i={field:"multiple",fieldName:"是否可多选",cType:"switch",config:{isRequire:!1,defaultValue:!1,options:[!0,!1]},listeners:{change:function(e,l){l.defaultValue=null,setTimeout((function(){t.config.multiple=e,e&&(l.defaultValue=[])}),0)}}},r={field:"allowCreate",fieldName:"是否可创建",cType:"switch",config:{isRequire:!1,defaultValue:!1,options:[!0,!1]}},o={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,l,n,i,r,o]},Ne=function(){return{field:"字段名称",defaultValue:"选项一",options:["选项一","选项二"],multiple:!1,clearable:!0,allowCreate:!1,filterable:!0,defaultFirstOption:!0,isRequire:!1}},je={component:ke,createDefaultConf:Ne,createConfItems:_e},Oe=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-time-picker",e._g({attrs:{placeholder:e.placeholder},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners))},Fe=[],Se={name:"MDateTimePicker",mixins:[F],props:{defaultValue:[String,Number,Object],isRequire:{type:Boolean,default:!1},isSelectNow:Boolean,placeholder:String},watch:{isSelectNow:function(e){this.value=e?Date.now():null}},created:function(){this.isSelectNow&&(this.value=Date.now())}},$e=Se,qe=Object(h["a"])($e,Oe,Fe,!1,null,"635838a8",null),Re=qe.exports,Ie=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"isSelectNow",fieldName:"是否选中当前日期",cType:"radio",config:{defaultValue:!1,options:{"是":!0,"否":!1}}},l={field:"placeholder",fieldName:"占位文本",cType:"input",config:{isRequire:!1,placeholder:"请输入占位文本"}},n={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,l,n]},Ee=function(){return{field:"字段名称",isSelectNow:!1,placeholder:"请选择时间",isRequire:!1}},Ve={component:Re,createDefaultConf:Ee,createConfItems:Ie},De=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-date-picker",e._g({attrs:{type:"date",placeholder:e.placeholder},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners))},Be=[],Me={name:"MDatePicker",mixins:[F],props:{defaultValue:[String,Number,Object],isRequire:{type:Boolean,default:!1},isSelectNow:Boolean,placeholder:String},watch:{isSelectNow:function(e){this.value=e?Date.now():null}},created:function(){this.isSelectNow&&(this.value=Date.now())}},He=Me,ze=Object(h["a"])(He,De,Be,!1,null,null,null),Le=ze.exports,Pe=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"isSelectNow",fieldName:"是否选中当前日期",cType:"radio",config:{defaultValue:!1,options:{"是":!0,"否":!1}}},l={field:"placeholder",fieldName:"占位文本",cType:"input",config:{isRequire:!1,placeholder:"请输入占位文本"}},n={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,l,n]},Je=function(){return{field:"字段名称",isSelectNow:!1,placeholder:"请选择日期",isRequire:!1}},We={component:Le,createDefaultConf:Je,createConfItems:Pe},Xe=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-date-picker",e._g({attrs:{type:"datetime",placeholder:e.placeholder},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e.$listeners))},Ye=[],Ge={name:"MDateTimePicker",mixins:[F],props:{defaultValue:[String,Number,Object],isRequire:{type:Boolean,default:!1},isSelectNow:Boolean,placeholder:String},watch:{isSelectNow:function(e){this.value=e?Date.now():null}},created:function(){this.isSelectNow&&(this.value=Date.now())}},Ke=Ge,Qe=Object(h["a"])(Ke,Xe,Ye,!1,null,null,null),Ue=Qe.exports,Ze=function(){var e={field:"field",fieldName:"字段名称",cType:"input",config:{isRequire:!0,placeholder:"请输入字段名称"}},t={field:"isSelectNow",fieldName:"是否选中当前日期",cType:"radio",config:{defaultValue:!1,options:{"是":!0,"否":!1}}},l={field:"placeholder",fieldName:"占位文本",cType:"input",config:{isRequire:!1,placeholder:"请输入占位文本"}},n={field:"isRequire",fieldName:"是否必填",cType:"switch",config:{defaultValue:!1,options:[!0,!1]}};return[e,t,l,n]},et=function(){return{field:"字段名称",isSelectNow:!1,placeholder:"请选择日期时间",isRequire:!1}},tt={component:Ue,createDefaultConf:et,createConfItems:Ze},lt={radio:W,checkbox:V,switch:te,input:ue,inputlist:ye,select:je,timepicker:Ve,datepicker:We,datetimepicker:tt},nt={props:{formAttrs:Object,cellAttrs:Object,controlType:String,controlAttrs:Object},data:function(){return{activeName:"form-attr",formAttrForm:null,cellAttrForm:null,controlAttrForm:null}},computed:{configItems:function(){if(this.controlAttrs){var e=lt[this.controlType].createConfItems;return e()}return[]}},watch:{controlAttrs:function(e){this.activeName=e?"control-attr":"form-attr",this.initControlAttrForm()},cellAttrs:function(e){this.controlType&&"text"!==this.controlType||(this.activeName=e?"cell-attr":"form-attr"),this.initCellAttrForm()},formAttrForm:{deep:!0,handler:function(e){this.$emit("changeFormAttrs",e)}},cellAttrForm:{deep:!0,handler:function(e){this.$emit("changeCellAttrs",e)}},controlAttrForm:{deep:!0,handler:function(e){this.$emit("changeControlAttrs",e)}}},mounted:function(){this.formAttrForm=w(this.formAttrs||{})},methods:{handleTabClick:function(){},initControlAttrForm:function(){var e=this;if(this.controlAttrs&&"text"!==this.controlType){var t=w(this.controlAttrs);this.controlAttrForm={},this.$nextTick((function(){e.controlAttrForm=t}))}else this.controlAttrForm=null},initCellAttrForm:function(){var e=this;if(this.cellAttrs){var t=w(this.cellAttrs);this.cellAttrForm={},this.$nextTick((function(){e.cellAttrForm=t}))}else this.cellAttrForm=null},getComp:function(e){var t=lt[e];return t?t.component:null},getListeners:function(e){var t=this,l={},n=e.listeners;if(!n||!x(n))return l;for(var i=function(){var e=o[r];if("function"!==typeof n[e])return"continue";l[e]=function(l){return n[e].call(null,l,t.controlAttrForm)}},r=0,o=Object.keys(n);r<o.length;r++)i();return l}}},it=nt,rt=(l("e4ef"),Object(h["a"])(it,b,y,!1,null,"5d53643e",null)),ot=rt.exports,at=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"menu-wrapper"},[l("ul",{staticClass:"list-wrapper"},e._l(e.formItems,(function(t,n){return l("li",{directives:[{name:"dragger",rawName:"v-dragger",value:t,expression:"item"}],key:t.cType,class:["item-wrapper",e.selectedIdx===n?"selected":""],on:{click:function(t){return e.selectItem(n)},dblclick:function(l){return e.emitItem(t)}}},[l("div",{staticClass:"item-content"},["radio"===t.cType?l("i",{staticClass:"iconfont icon-danxuankuang"}):"checkbox"===t.cType?l("i",{staticClass:"iconfont icon-duoxuankuang"}):"switch"===t.cType?l("i",{staticClass:"iconfont icon-kaiguan"}):"input"===t.cType?l("i",{staticClass:"iconfont icon-shurukuang"}):"select"===t.cType?l("i",{staticClass:"iconfont icon-xialacaidan"}):"timepicker"===t.cType?l("i",{staticClass:"iconfont icon-shijianxuanze"}):"datepicker"===t.cType?l("i",{staticClass:"iconfont icon-riqixuanze"}):"datetimepicker"===t.cType?l("i",{staticClass:"iconfont icon-riqishijian"}):e._e()]),l("div",{staticClass:"item-title"},[e._v(e._s(t.name))])])})),0)])},ct=[],st={data:function(){return{startDrag:!1,formItems:[{cType:"radio",name:"单选框"},{cType:"checkbox",name:"多选框"},{cType:"switch",name:"开关"},{cType:"input",name:"输入框"},{cType:"select",name:"选择器"},{cType:"timepicker",name:"时间选择器"},{cType:"datepicker",name:"日期选择器"},{cType:"datetimepicker",name:"日期时间选择器"}],options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],fileList:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100"}],selectedIdx:-1}},methods:{selectItem:function(e){this.selectedIdx===e?this.selectedIdx=-1:this.selectedIdx=e},emitItem:function(e){var t=e.cType;this.$emit("add",{id:Date.now().toString(16),ccType:t})},startDragHandler:function(){}}},ut=st,ft=(l("4d78"),Object(h["a"])(ut,at,ct,!1,null,"3145f6b0",null)),dt=ft.exports,pt=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"editor-wrapper"},[l("table",{ref:"table",staticClass:"editor-main"},e._l(e.rows,(function(t){return l("tr",{key:t},[e._l(e.cells,(function(n,i){return[n&&n.start[1]===t?l("td",{directives:[{name:"dropper",rawName:"v-dropper",value:e.dropEvent,expression:"dropEvent"}],key:i,class:["editor-cell",e.selectedMap[i]>-1?"selected":""],style:e.cellStyle(n,i),attrs:{"data-idx":e.calcIdx(n.start[0],n.start[1]),colspan:e.colspan(n),rowspan:e.rowspan(n)},on:{mousedown:function(t){return e.cellBindEvent(t,i)}}},["text"===n.cType?l("div",{ref:"text"+i,refInFor:!0,staticClass:"editor-text-content",on:{input:function(t){return e.cellInputHandler(n,t)},blur:function(t){return e.cellBlurHandler(n,t)}}},[e._v(" "+e._s(n.content)+" ")]):l("div",[l(e.compMap[n.cType],e._b({tag:"component",model:{value:n.value,callback:function(t){e.$set(n,"value",t)},expression:"cell.value"}},"component",n.content,!1)),n.cType&&"text"!==n.cType?l("el-button",{staticClass:"el-icon-delete-solid clear-content",attrs:{type:"text",title:"清除内容"},on:{click:function(t){return e.clearContent(i)}}}):e._e()],1)]):e._e()]}))],2)})),0)])},mt=[],ht=(l("c975"),l("13d5"),l("6062"),l("3ca3"),l("ddb0"),l("2909")),vt={model:{event:"change",prop:"layout"},props:{cmd:String,rows:{type:Number,default:0},cols:{type:Number,default:0},layout:{type:Array,default:function(){return[]}}},data:function(){return{editIdx:-1,selected:[],cells:[]}},computed:{compMap:function(){for(var e={},t=0,l=Object.keys(lt);t<l.length;t++){var n=l[t];e[n]=lt[n].component}return e},selectedMap:function(){return this.selected.reduce((function(e,t){return e[t]=1,e}),{})}},watch:{cmd:function(e){"merge"===e?this.mergeCell():"split"===e&&this.splitCell()},layout:function(e){this.cells!==e&&this.initCells()}},mounted:function(){this.initCells()},methods:{initCells:function(){this.cells=this.layout.map((function(e){return e?{start:e.start,end:e.end,state:e.state||"cell",cType:e.cType||"text",content:e.content||"",attrs:e.attrs||{}}:null})),this.emitEvent()},emitEvent:function(){this.$emit("change",this.cells)},colspan:function(e){return e.end[0]-e.start[0]+1},rowspan:function(e){return e.end[1]-e.start[1]+1},cellStyle:function(e,t){return{width:this.cellWidth(t),height:this.cellHeight(t),lineHeight:this.cellHeight(t),textAlign:e.attrs.textAlign||"center",backgroundColor:e.attrs.backgroundColor,color:e.attrs.textColor,fontSize:e.attrs.fontSize}},cellWidth:function(e){var t=this.cells[e];return"".concat(100*this.colspan(t)/this.cols,"%")},cellHeight:function(e){var t=this.cells[e];return"".concat(.25*this.rowspan(t),"rem")},calcIdx:function(e,t){return(t-1)*this.cols+e-1},mergeCell:function(){if(!(this.selected.length<=1)){var e,t=Object(u["a"])(this.selected);try{for(t.s();!(e=t.n()).done;){var l=e.value;if("merge"===this.cells[l].state)return}}catch(a){t.e(a)}finally{t.f()}var n=this.selected,i=Object(ht["a"])(this.cells),r=i[n[0]],o=i[n[n.length-1]];r.end[0]=o.end[0],r.end[1]=o.end[1],r.state="merge",this.cells=i.map((function(e,t){return n.indexOf(t)>0?null:e})),this.selected=[this.selected[0]],this.emitEvent()}},splitCell:function(){var e,t=Object(ht["a"])(this.selected),l=Object(ht["a"])(this.cells),n=this.cells[t[0]],i=n.cType,r=n.content,o=Object(u["a"])(t);try{for(o.s();!(e=o.n()).done;){var a=e.value;if(l[a]&&"merge"===l[a].state)for(var c=l[a],s=c.start,f=c.end,d=s[1];d<=f[1];d++)for(var p=s[0];p<=f[0];p++){var m=this.calcIdx(p,d);this.cells[m]={start:[p,d],end:[p,d],state:"cell"},-1===t.indexOf(m)&&t.push(m)}}}catch(h){o.e(h)}finally{o.f()}this.cells[t[0]].cType=i,this.cells[t[0]].content=r,this.selected=t.sort((function(e,t){return e-t})),this.emitEvent()},dropEvent:function(e,t){var l=Number(t.currentTarget.dataset.idx),n=e.cType,i=lt[n].createDefaultConf;this.cells[l].cType=n,this.cells[l].content=i(),this.selected=[l],this.$emit("select",this.selected),this.emitEvent()},cellBlurHandler:function(e,t){var l=t.currentTarget;l.contentEditable=!1,l.innerText=e.content,this.editIdx=-1,this.emitEvent()},cellInputHandler:function(e,t){e.content=t.currentTarget.innerText},clearContent:function(e){this.$set(this.cells[e],"cType","text"),this.$set(this.cells[e],"content",""),this.emitEvent()},cellBindEvent:function(e,t){for(var l=this,n=e.currentTarget,i=!0,r=e.pageX,o=e.pageY,a=this.$refs.table.querySelectorAll("td"),c=[],s=0;s<a.length;s++){var u=a[s],f=Number(u.dataset.idx);c[f]=u.getBoundingClientRect()}var d=function(e){if(e.preventDefault(),!(l.editIdx>-1)){var t=e.pageX,n=e.pageY,a=t-r,s=n-o;if(i&&a*a+s*s>10&&(i=!1),!i){for(var u=Math.min(r,t),f=Math.min(o,n),d=Math.abs(a),p=Math.abs(s),m=[],h=0;h<c.length;h++)if(c[h]){var v=c[h];gt(v.left,v.top,v.width,v.height,u,f,d,p)&&m.push(h)}l.selected=Object(ht["a"])(new Set(m))}}},p=function e(n){n.preventDefault(),document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",e,!1),l.editIdx>-1||(i?-1===l.editIdx&&(l.selected=[t],l.$emit("select",l.selected)):(l.selected=l.selected.sort((function(e,t){return e-t})),l.$emit("select",l.selected)))};if(document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",p,!1),"text"===this.cells[t].cType){if(n.clicked){n.clicked=!1,this.selected=[],this.editIdx=t;var m=this.$refs["text"+t][0];return m.contentEditable=!0,void m.focus()}n.clicked=!0,setTimeout((function(){n.clicked=!1}),200)}}}};function gt(e,t,l,n,i,r,o,a){return!(e>i&&e>i+o)&&(!(e<i&&e+l<i)&&(!(t>r&&t>r+a)&&!(t<r&&t+n<r)))}var bt=vt,yt=(l("ffbc"),Object(h["a"])(bt,pt,mt,!1,null,"fa41872c",null)),Ct=yt.exports,xt=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-button",{on:{click:function(t){return e.$emit("exec","merge")}}},[e._v("合并")]),l("el-button",{on:{click:function(t){return e.$emit("exec","split")}}},[e._v("拆分")]),l("el-button",{on:{click:function(t){return e.$emit("exec","save")}}},[e._v("保存")])],1)},wt=[],Tt={},At=Tt,kt=Object(h["a"])(At,xt,wt,!1,null,"1b67930e",null),_t=kt.exports,Nt={components:{AttrConfigurator:ot,ControlPanel:dt,FormEditor:Ct,ToolBar:_t,SideDrawer:g},data:function(){return{cmd:"",rows:10,cols:24,layout:[],formAttrs:{name:"表单名称"},selected:[]}},computed:{selectedCells:function(){var e=this;return this.selected.map((function(t){return e.layout[t]}))},cellAttrs:function(){return 1===this.selectedCells.length?this.selectedCells[0].attrs:this.selectedCells.length>1?{}:null},controlType:function(){return 1===this.selectedCells.length?this.selectedCells[0].cType:null},controlAttrs:function(){if(1===this.selectedCells.length){var e=this.selectedCells[0];return"text"!==e.cType?e.content:null}return null}},created:function(){this.initLayout()},mounted:function(){var e=this;window.onbeforeunload=function(){if(JSON.stringify(e.layout)!==window.localStorage.getItem("formjson"))return"表单未保存，是否继续退出?"}},methods:{initLayout:function(){var e=window.localStorage.getItem("formjson");if(e)this.layout=JSON.parse(e);else{for(var t=[],l=1;l<=this.rows;l++)for(var n=1;n<=this.cols;n++)t.push({start:[n,l],end:[n,l]});this.layout=t}},execCmd:function(e){var t=this;"save"!==e?(this.cmd=e,this.$nextTick((function(){t.cmd=""}))):window.localStorage.setItem("formjson",JSON.stringify(this.layout))},changeFormAttrsHandler:function(e){this.formAttrs=e},changeCellAttrsHandler:function(e){if(1===this.selectedCells.length)for(var t=this.selectedCells[0].attrs,l=0,n=Object.keys(e);l<n.length;l++){var i=n[l];this.$set(t,i,e[i])}else{var r,o=Object(u["a"])(this.selectedCells);try{for(o.s();!(r=o.n()).done;)for(var a=r.value,c=a.attrs,s=0,f=Object.keys(e);s<f.length;s++){var d=f[s];this.$set(c,d,e[d])}}catch(p){o.e(p)}finally{o.f()}}},changeControlAttrsHandler:function(e){if(this.controlAttrs)for(var t=this.selectedCells[0].content,l=0,n=Object.keys(e);l<n.length;l++){var i=n[l];this.$set(t,i,e[i])}},selectItemHandler:function(e){this.selected=e}}},jt=Nt,Ot=(l("17dc"),Object(h["a"])(jt,c,s,!1,null,"b49c7f6c",null)),Ft=Ot.exports;l("a342");var St={name:"App",components:{FormBuilder:Ft}},$t=St,qt=(l("034f"),Object(h["a"])($t,o,a,!1,null,null,null)),Rt=qt.exports;r["default"].config.productionTip=!1,r["default"].directive("dragger",{inserted:function(e,t){var l=t.value;e.draggable=!0,e.addEventListener("dragstart",(function(e){e.dataTransfer.setData("text",JSON.stringify(l))}))}}),r["default"].directive("dropper",{inserted:function(e,t){var l=t.value;"function"===typeof l&&(e.addEventListener("dragover",(function(e){try{e.preventDefault(),e.dataTransfer.dropEffect="move"}catch(e){console.error(e)}})),e.addEventListener("drop",(function(e){try{var t=e.dataTransfer.getData("text");if(t&&t.trim()){var n=JSON.parse(t.trim());l.call(null,n,e)}}catch(e){console.error(e)}})))}}),r["default"].use(i.a,{size:"mini",zIndex:3e3}),new r["default"]({render:function(e){return e(Rt)}}).$mount("#app")},5882:function(e,t,l){},6934:function(e,t,l){"use strict";var n=l("4601"),i=l.n(n);i.a},8533:function(e,t,l){},"85ec":function(e,t,l){},"87bb":function(e,t,l){"use strict";var n=l("3e0d"),i=l.n(n);i.a},"89ae":function(e,t,l){},a342:function(e,t,l){},a36d:function(e,t,l){"use strict";var n=l("cfa0"),i=l.n(n);i.a},cfa0:function(e,t,l){},e4ef:function(e,t,l){"use strict";var n=l("5882"),i=l.n(n);i.a},ffbc:function(e,t,l){"use strict";var n=l("050a"),i=l.n(n);i.a}});
//# sourceMappingURL=app.febb07b4.js.map